(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();function Rn(r,i){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var e=t.call(r,i);if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Qe(r){var i=Rn(r,"string");return typeof i=="symbol"?i:i+""}function re(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function ti(r,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,Qe(e.key),e)}}function ae(r,i,t){return i&&ti(r.prototype,i),t&&ti(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Oe(r){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Oe(r)}function qi(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qi=function(){return!!r})()}function Pn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Mn(r,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(r)}function ce(r,i,t){return i=Oe(i),Mn(r,qi()?Reflect.construct(i,t||[],Oe(r).constructor):i.apply(r,t))}function zt(r,i){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zt(r,i)}function he(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&zt(r,i)}function Dn(r){if(Array.isArray(r))return r}function kn(r,i){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var e,n,a,s,o=[],u=!0,l=!1;try{if(a=(t=t.call(r)).next,i===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(e=a.call(t)).done)&&(o.push(e.value),o.length!==i);u=!0);}catch(d){l=!0,n=d}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw n}}return o}}function $t(r,i){(i==null||i>r.length)&&(i=r.length);for(var t=0,e=Array(i);t<i;t++)e[t]=r[t];return e}function Vi(r,i){if(r){if(typeof r=="string")return $t(r,i);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$t(r,i):void 0}}function Gn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(r,i){return Dn(r)||kn(r,i)||Vi(r,i)||Gn()}var pt={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Ki=new Int8Array(4),mt=new Int32Array(Ki.buffer,0,1),xn=new Float32Array(Ki.buffer,0,1),Fn=/^\s*rgba?\s*\(/,In=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Nn(r){var i=0,t=0,e=0,n=1;if(r[0]==="#")r.length===4?(i=parseInt(r.charAt(1)+r.charAt(1),16),t=parseInt(r.charAt(2)+r.charAt(2),16),e=parseInt(r.charAt(3)+r.charAt(3),16)):(i=parseInt(r.charAt(1)+r.charAt(2),16),t=parseInt(r.charAt(3)+r.charAt(4),16),e=parseInt(r.charAt(5)+r.charAt(6),16)),r.length===9&&(n=parseInt(r.charAt(7)+r.charAt(8),16)/255);else if(Fn.test(r)){var a=r.match(In);a&&(i=+a[1],t=+a[2],e=+a[3],a[4]&&(n=+a[4]))}return{r:i,g:t,b:e,a:n}}var Be={};for(var st in pt)Be[st]=et(pt[st]),Be[pt[st]]=Be[st];function Zi(r,i,t,e,n){return mt[0]=e<<24|t<<16|i<<8|r,mt[0]=mt[0]&4278190079,xn[0]}function et(r){if(r=r.toLowerCase(),typeof Be[r]<"u")return Be[r];var i=Nn(r),t=i.r,e=i.g,n=i.b,a=i.a;a=a*255|0;var s=Zi(t,e,n,a);return Be[r]=s,s}var vt={};function Yi(r){if(typeof vt[r]<"u")return vt[r];var i=(r&16711680)>>>16,t=(r&65280)>>>8,e=r&255,n=255,a=Zi(i,t,e,n);return vt[r]=a,a}function ii(r,i,t,e){return t+(i<<8)+(r<<16)}function ni(r,i,t,e,n,a){var s=Math.floor(t/a*n),o=Math.floor(r.drawingBufferHeight/a-e/a*n),u=new Uint8Array(4);r.bindFramebuffer(r.FRAMEBUFFER,i),r.readPixels(s,o,1,1,r.RGBA,r.UNSIGNED_BYTE,u);var l=Ue(u,4),d=l[0],c=l[1],f=l[2],g=l[3];return[d,c,f,g]}function k(r,i,t){return(i=Qe(i))in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t,r}function ri(r,i){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);i&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,e)}return t}function N(r){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?ri(Object(t),!0).forEach(function(e){k(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ri(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function Bn(r,i){for(;!{}.hasOwnProperty.call(r,i)&&(r=Oe(r))!==null;);return r}function Ht(){return Ht=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,i,t){var e=Bn(r,i);if(e){var n=Object.getOwnPropertyDescriptor(e,i);return n.get?n.get.call(arguments.length<3?r:t):n.value}},Ht.apply(null,arguments)}function Xi(r,i,t,e){var n=Ht(Oe(r.prototype),i,t);return typeof n=="function"?function(a){return n.apply(t,a)}:n}function On(r){return r.normalized?1:r.size}function bt(r){var i=0;return r.forEach(function(t){return i+=On(t)}),i}function Ji(r,i,t){var e=r==="VERTEX"?i.VERTEX_SHADER:i.FRAGMENT_SHADER,n=i.createShader(e);if(n===null)throw new Error("loadShader: error while creating the shader");i.shaderSource(n,t),i.compileShader(n);var a=i.getShaderParameter(n,i.COMPILE_STATUS);if(!a){var s=i.getShaderInfoLog(n);throw i.deleteShader(n),new Error(`loadShader: error while compiling the shader:
`.concat(s,`
`).concat(t))}return n}function Un(r,i){return Ji("VERTEX",r,i)}function zn(r,i){return Ji("FRAGMENT",r,i)}function $n(r,i){var t=r.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var e,n;for(e=0,n=i.length;e<n;e++)r.attachShader(t,i[e]);r.linkProgram(t);var a=r.getProgramParameter(t,r.LINK_STATUS);if(!a)throw r.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function ai(r){var i=r.gl,t=r.buffer,e=r.program,n=r.vertexShader,a=r.fragmentShader;i.deleteShader(n),i.deleteShader(a),i.deleteProgram(e),i.deleteBuffer(t)}var si=`#define PICKING_MODE
`,Hn=k(k(k(k(k(k(k(k({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Qi=function(){function r(i,t,e){re(this,r),k(this,"array",new Float32Array),k(this,"constantArray",new Float32Array),k(this,"capacity",0),k(this,"verticesCount",0);var n=this.getDefinition();if(this.VERTICES=n.VERTICES,this.VERTEX_SHADER_SOURCE=n.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=n.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=n.UNIFORMS,this.ATTRIBUTES=n.ATTRIBUTES,this.METHOD=n.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in n?n.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in n?n.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in n,this.ATTRIBUTES_ITEMS_COUNT=bt(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=e,this.normalProgram=this.getProgramInfo("normal",i,n.VERTEX_SHADER_SOURCE,n.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",i,si+n.VERTEX_SHADER_SOURCE,si+n.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var a=bt(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var s=0;s<this.CONSTANT_DATA.length;s++){var o=this.CONSTANT_DATA[s];if(o.length!==a)throw new Error("Program: error while getting constant data (one vector has ".concat(o.length," items instead of ").concat(a,")"));for(var u=0;u<o.length;u++)this.constantArray[s*a+u]=o[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return ae(r,[{key:"kill",value:function(){ai(this.normalProgram),this.pickProgram&&(ai(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,e,n,a,s){var o=this.getDefinition(),u=e.createBuffer();if(u===null)throw new Error("Program: error while creating the WebGL buffer.");var l=Un(e,n),d=zn(e,a),c=$n(e,[l,d]),f={};o.UNIFORMS.forEach(function(S){var L=e.getUniformLocation(c,S);L&&(f[S]=L)});var g={};o.ATTRIBUTES.forEach(function(S){g[S.name]=e.getAttribLocation(c,S.name)});var w;if("CONSTANT_ATTRIBUTES"in o&&(o.CONSTANT_ATTRIBUTES.forEach(function(S){g[S.name]=e.getAttribLocation(c,S.name)}),w=e.createBuffer(),w===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:c,gl:e,frameBuffer:s,buffer:u,constantBuffer:w||{},uniformLocations:f,attributeLocations:g,isPicking:t==="pick",vertexShader:l,fragmentShader:d}}},{key:"bindProgram",value:function(t){var e=this,n=0,a=t.gl,s=t.buffer;this.isInstanced?(a.bindBuffer(a.ARRAY_BUFFER,t.constantBuffer),n=0,this.CONSTANT_ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n,!1)}),a.bufferData(a.ARRAY_BUFFER,this.constantArray,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,t.buffer),n=0,this.ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n,!0)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)):(a.bindBuffer(a.ARRAY_BUFFER,s),n=0,this.ATTRIBUTES.forEach(function(o){return n+=e.bindAttribute(o,t,n)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)),a.bindBuffer(a.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var e=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!1)}),this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!0)})):this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t)})}},{key:"bindAttribute",value:function(t,e,n,a){var s=Hn[t.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var o=e.attributeLocations[t.name],u=e.gl;if(o!==-1){u.enableVertexAttribArray(o);var l=this.isInstanced?(a?this.ATTRIBUTES_ITEMS_COUNT:bt(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(o,t.size,t.type,t.normalized||!1,l,n),this.isInstanced&&a)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(o,1);else{var d=u.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(o,1)}}return t.size*s}},{key:"unbindAttribute",value:function(t,e,n){var a=e.attributeLocations[t.name],s=e.gl;if(a!==-1&&(s.disableVertexAttribArray(a),this.isInstanced&&n))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(a,0);else{var o=s.getExtension("ANGLE_instanced_arrays");o&&o.vertexAttribDivisorANGLE(a,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,e){var n=e.gl,a=e.program;n.enable(n.BLEND),n.useProgram(a),this.setUniforms(t,e),this.drawWebGL(this.METHOD,e)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(N(N({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,e){var n=e.gl,a=e.frameBuffer;if(n.bindFramebuffer(n.FRAMEBUFFER,a),!this.isInstanced)n.drawArrays(t,0,this.verticesCount);else if(n instanceof WebGL2RenderingContext)n.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var s=n.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}])}(),jn=function(r){function i(){return re(this,i),ce(this,i,arguments)}return he(i,r),ae(i,[{key:"kill",value:function(){Xi(i,"kill",this)([])}},{key:"process",value:function(e,n,a){var s=n*this.STRIDE;if(a.hidden){for(var o=s+this.STRIDE;s<o;s++)this.array[s]=0;return}return this.processVisibleItem(Yi(e),s,a)}}])}(Qi),qt=function(r){function i(){var t;re(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=ce(this,i,[].concat(n)),k(t,"drawLabel",void 0),t}return he(i,r),ae(i,[{key:"kill",value:function(){Xi(i,"kill",this)([])}},{key:"process",value:function(e,n,a,s,o){var u=n*this.STRIDE;if(o.hidden||a.hidden||s.hidden){for(var l=u+this.STRIDE;u<l;u++)this.array[u]=0;return}return this.processVisibleItem(Yi(e),u,a,s,o)}}])}(Qi);function Wn(r,i){return function(){function t(e,n,a){re(this,t),k(this,"drawLabel",i),this.programs=r.map(function(s){return new s(e,n,a)})}return ae(t,[{key:"reallocate",value:function(n){this.programs.forEach(function(a){return a.reallocate(n)})}},{key:"process",value:function(n,a,s,o,u){this.programs.forEach(function(l){return l.process(n,a,s,o,u)})}},{key:"render",value:function(n){this.programs.forEach(function(a){return a.render(n)})}},{key:"kill",value:function(){this.programs.forEach(function(n){return n.kill()})}}])}()}function qn(r,i,t,e,n){var a=n.edgeLabelSize,s=n.edgeLabelFont,o=n.edgeLabelWeight,u=n.edgeLabelColor.attribute?i[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,l=i.label;if(l){r.fillStyle=u,r.font="".concat(o," ").concat(a,"px ").concat(s);var d=t.size,c=e.size,f=t.x,g=t.y,w=e.x,S=e.y,L=(f+w)/2,G=(g+S)/2,P=w-f,M=S-g,b=Math.sqrt(P*P+M*M);if(!(b<d+c)){f+=P*d/b,g+=M*d/b,w-=P*c/b,S-=M*c/b,L=(f+w)/2,G=(g+S)/2,P=w-f,M=S-g,b=Math.sqrt(P*P+M*M);var _=r.measureText(l).width;if(_>b){var D="â€¦";for(l=l+D,_=r.measureText(l).width;_>b&&l.length>1;)l=l.slice(0,-2)+D,_=r.measureText(l).width;if(l.length<4)return}var h;P>0?M>0?h=Math.acos(P/b):h=Math.asin(M/b):M>0?h=Math.acos(P/b)+Math.PI:h=Math.asin(P/b)+Math.PI/2,r.save(),r.translate(L,G),r.rotate(h),r.fillText(l,-_/2,i.size/2+a),r.restore()}}}function en(r,i,t){if(i.label){var e=t.labelSize,n=t.labelFont,a=t.labelWeight,s=t.labelColor.attribute?i[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;r.fillStyle=s,r.font="".concat(a," ").concat(e,"px ").concat(n),r.fillText(i.label,i.x+i.size+3,i.y+e/3)}}function Vn(r,i,t){var e=t.labelSize,n=t.labelFont,a=t.labelWeight;r.font="".concat(a," ").concat(e,"px ").concat(n),r.fillStyle="#FFF",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor="#000";var s=2;if(typeof i.label=="string"){var o=r.measureText(i.label).width,u=Math.round(o+5),l=Math.round(e+2*s),d=Math.max(i.size,e/2)+s,c=Math.asin(l/2/d),f=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(l/2,2)));r.beginPath(),r.moveTo(i.x+f,i.y+l/2),r.lineTo(i.x+d+u,i.y+l/2),r.lineTo(i.x+d+u,i.y-l/2),r.lineTo(i.x+f,i.y-l/2),r.arc(i.x,i.y,d,c,-c),r.closePath(),r.fill()}else r.beginPath(),r.arc(i.x,i.y,i.size+s,0,Math.PI*2),r.closePath(),r.fill();r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,en(r,i,t)}var Kn=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Zn=Kn,Yn=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Xn=Yn,tn=WebGLRenderingContext,oi=tn.UNSIGNED_BYTE,Et=tn.FLOAT,Jn=["u_sizeRatio","u_correctionRatio","u_matrix"],ft=function(r){function i(){return re(this,i),ce(this,i,arguments)}return he(i,r),ae(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Xn,FRAGMENT_SHADER_SOURCE:Zn,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Jn,ATTRIBUTES:[{name:"a_position",size:2,type:Et},{name:"a_size",size:1,type:Et},{name:"a_color",size:4,type:oi,normalized:!0},{name:"a_id",size:4,type:oi,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Et}],CONSTANT_DATA:[[i.ANGLE_1],[i.ANGLE_2],[i.ANGLE_3]]}}},{key:"processVisibleItem",value:function(e,n,a){var s=this.array,o=et(a.color);s[n++]=a.x,s[n++]=a.y,s[n++]=a.size,s[n++]=o,s[n++]=e}},{key:"setUniforms",value:function(e,n){var a=n.gl,s=n.uniformLocations,o=s.u_sizeRatio,u=s.u_correctionRatio,l=s.u_matrix;a.uniform1f(u,e.correctionRatio),a.uniform1f(o,e.sizeRatio),a.uniformMatrix3fv(l,!1,e.matrix)}}])}(jn);k(ft,"ANGLE_1",0);k(ft,"ANGLE_2",2*Math.PI/3);k(ft,"ANGLE_3",4*Math.PI/3);var Qn=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,er=Qn,tr=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,ir=tr,nn=WebGLRenderingContext,ui=nn.UNSIGNED_BYTE,ot=nn.FLOAT,nr=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],rn={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function an(r){var i=N(N({},rn),{});return function(t){function e(){return re(this,e),ce(this,e,arguments)}return he(e,t),ae(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:ir,FRAGMENT_SHADER_SOURCE:er,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:nr,ATTRIBUTES:[{name:"a_position",size:2,type:ot},{name:"a_normal",size:2,type:ot},{name:"a_radius",size:1,type:ot},{name:"a_color",size:4,type:ui,normalized:!0},{name:"a_id",size:4,type:ui,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:ot}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(a,s,o,u,l){if(i.extremity==="source"){var d=[u,o];o=d[0],u=d[1]}var c=l.size||1,f=u.size||1,g=o.x,w=o.y,S=u.x,L=u.y,G=et(l.color),P=S-g,M=L-w,b=P*P+M*M,_=0,D=0;b&&(b=1/Math.sqrt(b),_=-M*b*c,D=P*b*c);var h=this.array;h[s++]=S,h[s++]=L,h[s++]=-_,h[s++]=-D,h[s++]=f,h[s++]=G,h[s++]=a}},{key:"setUniforms",value:function(a,s){var o=s.gl,u=s.uniformLocations,l=u.u_matrix,d=u.u_sizeRatio,c=u.u_correctionRatio,f=u.u_minEdgeThickness,g=u.u_lengthToThicknessRatio,w=u.u_widenessToThicknessRatio;o.uniformMatrix3fv(l,!1,a.matrix),o.uniform1f(d,a.sizeRatio),o.uniform1f(c,a.correctionRatio),o.uniform1f(f,a.minEdgeThickness),o.uniform1f(g,i.lengthToThicknessRatio),o.uniform1f(w,i.widenessToThicknessRatio)}}])}(qt)}an();var rr=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,sn=rr,ar=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,sr=ar,on=WebGLRenderingContext,li=on.UNSIGNED_BYTE,ke=on.FLOAT,or=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],ur={lengthToThicknessRatio:rn.lengthToThicknessRatio};function un(r){var i=N(N({},ur),{});return function(t){function e(){return re(this,e),ce(this,e,arguments)}return he(e,t),ae(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:sr,FRAGMENT_SHADER_SOURCE:sn,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:or,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ke},{name:"a_positionEnd",size:2,type:ke},{name:"a_normal",size:2,type:ke},{name:"a_color",size:4,type:li,normalized:!0},{name:"a_id",size:4,type:li,normalized:!0},{name:"a_radius",size:1,type:ke}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ke},{name:"a_normalCoef",size:1,type:ke},{name:"a_radiusCoef",size:1,type:ke}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(a,s,o,u,l){var d=l.size||1,c=o.x,f=o.y,g=u.x,w=u.y,S=et(l.color),L=g-c,G=w-f,P=u.size||1,M=L*L+G*G,b=0,_=0;M&&(M=1/Math.sqrt(M),b=-G*M*d,_=L*M*d);var D=this.array;D[s++]=c,D[s++]=f,D[s++]=g,D[s++]=w,D[s++]=b,D[s++]=_,D[s++]=S,D[s++]=a,D[s++]=P}},{key:"setUniforms",value:function(a,s){var o=s.gl,u=s.uniformLocations,l=u.u_matrix,d=u.u_zoomRatio,c=u.u_feather,f=u.u_pixelRatio,g=u.u_correctionRatio,w=u.u_sizeRatio,S=u.u_minEdgeThickness,L=u.u_lengthToThicknessRatio;o.uniformMatrix3fv(l,!1,a.matrix),o.uniform1f(d,a.zoomRatio),o.uniform1f(w,a.sizeRatio),o.uniform1f(g,a.correctionRatio),o.uniform1f(f,a.pixelRatio),o.uniform1f(c,a.antiAliasingFeather),o.uniform1f(S,a.minEdgeThickness),o.uniform1f(L,i.lengthToThicknessRatio)}}])}(qt)}un();function lr(r){return Wn([un(),an()])}var dr=lr(),cr=dr,hr=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,fr=hr,ln=WebGLRenderingContext,di=ln.UNSIGNED_BYTE,qe=ln.FLOAT,yr=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],gr=function(r){function i(){return re(this,i),ce(this,i,arguments)}return he(i,r),ae(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:fr,FRAGMENT_SHADER_SOURCE:sn,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:yr,ATTRIBUTES:[{name:"a_positionStart",size:2,type:qe},{name:"a_positionEnd",size:2,type:qe},{name:"a_normal",size:2,type:qe},{name:"a_color",size:4,type:di,normalized:!0},{name:"a_id",size:4,type:di,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:qe},{name:"a_normalCoef",size:1,type:qe}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,n,a,s,o){var u=o.size||1,l=a.x,d=a.y,c=s.x,f=s.y,g=et(o.color),w=c-l,S=f-d,L=w*w+S*S,G=0,P=0;L&&(L=1/Math.sqrt(L),G=-S*L*u,P=w*L*u);var M=this.array;M[n++]=l,M[n++]=d,M[n++]=c,M[n++]=f,M[n++]=G,M[n++]=P,M[n++]=g,M[n++]=e}},{key:"setUniforms",value:function(e,n){var a=n.gl,s=n.uniformLocations,o=s.u_matrix,u=s.u_zoomRatio,l=s.u_feather,d=s.u_pixelRatio,c=s.u_correctionRatio,f=s.u_sizeRatio,g=s.u_minEdgeThickness;a.uniformMatrix3fv(o,!1,e.matrix),a.uniform1f(u,e.zoomRatio),a.uniform1f(f,e.sizeRatio),a.uniform1f(c,e.correctionRatio),a.uniform1f(d,e.pixelRatio),a.uniform1f(l,e.antiAliasingFeather),a.uniform1f(g,e.minEdgeThickness)}}])}(qt);function Vt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ut={exports:{}},ci;function pr(){if(ci)return ut.exports;ci=1;var r=typeof Reflect=="object"?Reflect:null,i=r&&typeof r.apply=="function"?r.apply:function(_,D,h){return Function.prototype.apply.call(_,D,h)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:t=function(_){return Object.getOwnPropertyNames(_)};function e(b){console&&console.warn&&console.warn(b)}var n=Number.isNaN||function(_){return _!==_};function a(){a.init.call(this)}ut.exports=a,ut.exports.once=G,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(b){if(typeof b!="number"||b<0||n(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");s=b}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||n(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function u(b){return b._maxListeners===void 0?a.defaultMaxListeners:b._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(_){for(var D=[],h=1;h<arguments.length;h++)D.push(arguments[h]);var E=_==="error",p=this._events;if(p!==void 0)E=E&&p.error===void 0;else if(!E)return!1;if(E){var v;if(D.length>0&&(v=D[0]),v instanceof Error)throw v;var T=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw T.context=v,T}var R=p[_];if(R===void 0)return!1;if(typeof R=="function")i(R,this,D);else for(var y=R.length,H=w(R,y),h=0;h<y;++h)i(H[h],this,D);return!0};function l(b,_,D,h){var E,p,v;if(o(D),p=b._events,p===void 0?(p=b._events=Object.create(null),b._eventsCount=0):(p.newListener!==void 0&&(b.emit("newListener",_,D.listener?D.listener:D),p=b._events),v=p[_]),v===void 0)v=p[_]=D,++b._eventsCount;else if(typeof v=="function"?v=p[_]=h?[D,v]:[v,D]:h?v.unshift(D):v.push(D),E=u(b),E>0&&v.length>E&&!v.warned){v.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=b,T.type=_,T.count=v.length,e(T)}return b}a.prototype.addListener=function(_,D){return l(this,_,D,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(_,D){return l(this,_,D,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(b,_,D){var h={fired:!1,wrapFn:void 0,target:b,type:_,listener:D},E=d.bind(h);return E.listener=D,h.wrapFn=E,E}a.prototype.once=function(_,D){return o(D),this.on(_,c(this,_,D)),this},a.prototype.prependOnceListener=function(_,D){return o(D),this.prependListener(_,c(this,_,D)),this},a.prototype.removeListener=function(_,D){var h,E,p,v,T;if(o(D),E=this._events,E===void 0)return this;if(h=E[_],h===void 0)return this;if(h===D||h.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete E[_],E.removeListener&&this.emit("removeListener",_,h.listener||D));else if(typeof h!="function"){for(p=-1,v=h.length-1;v>=0;v--)if(h[v]===D||h[v].listener===D){T=h[v].listener,p=v;break}if(p<0)return this;p===0?h.shift():S(h,p),h.length===1&&(E[_]=h[0]),E.removeListener!==void 0&&this.emit("removeListener",_,T||D)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(_){var D,h,E;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[_]),this;if(arguments.length===0){var p=Object.keys(h),v;for(E=0;E<p.length;++E)v=p[E],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=h[_],typeof D=="function")this.removeListener(_,D);else if(D!==void 0)for(E=D.length-1;E>=0;E--)this.removeListener(_,D[E]);return this};function f(b,_,D){var h=b._events;if(h===void 0)return[];var E=h[_];return E===void 0?[]:typeof E=="function"?D?[E.listener||E]:[E]:D?L(E):w(E,E.length)}a.prototype.listeners=function(_){return f(this,_,!0)},a.prototype.rawListeners=function(_){return f(this,_,!1)},a.listenerCount=function(b,_){return typeof b.listenerCount=="function"?b.listenerCount(_):g.call(b,_)},a.prototype.listenerCount=g;function g(b){var _=this._events;if(_!==void 0){var D=_[b];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function w(b,_){for(var D=new Array(_),h=0;h<_;++h)D[h]=b[h];return D}function S(b,_){for(;_+1<b.length;_++)b[_]=b[_+1];b.pop()}function L(b){for(var _=new Array(b.length),D=0;D<_.length;++D)_[D]=b[D].listener||b[D];return _}function G(b,_){return new Promise(function(D,h){function E(v){b.removeListener(_,p),h(v)}function p(){typeof b.removeListener=="function"&&b.removeListener("error",E),D([].slice.call(arguments))}M(b,_,p,{once:!0}),_!=="error"&&P(b,E,{once:!0})})}function P(b,_,D){typeof b.on=="function"&&M(b,"error",_,D)}function M(b,_,D,h){if(typeof b.on=="function")h.once?b.once(_,D):b.on(_,D);else if(typeof b.addEventListener=="function")b.addEventListener(_,function E(p){h.once&&b.removeEventListener(_,E),D(p)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return ut.exports}var dn=pr(),Kt=function(r){function i(){var t;return re(this,i),t=ce(this,i),t.rawEmitter=t,t}return he(i,r),ae(i)}(dn.EventEmitter),wt,hi;function Fe(){return hi||(hi=1,wt=function(i){return i!==null&&typeof i=="object"&&typeof i.addUndirectedEdgeWithKey=="function"&&typeof i.dropNode=="function"&&typeof i.multi=="boolean"}),wt}var mr=Fe();const vr=Vt(mr);var br=function(i){return i},Er=function(i){return i*i},wr=function(i){return i*(2-i)},Sr=function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)},_r=function(i){return i*i*i},Cr=function(i){return--i*i*i+1},Ar=function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)},Tr={linear:br,quadraticIn:Er,quadraticOut:wr,quadraticInOut:Sr,cubicIn:_r,cubicOut:Cr,cubicInOut:Ar},Lr={easing:"quadraticInOut",duration:150};function pe(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function lt(r,i,t){return r[0]=i,r[4]=typeof t=="number"?t:i,r}function fi(r,i){var t=Math.sin(i),e=Math.cos(i);return r[0]=e,r[1]=t,r[3]=-t,r[4]=e,r}function yi(r,i,t){return r[6]=i,r[7]=t,r}function Pe(r,i){var t=r[0],e=r[1],n=r[2],a=r[3],s=r[4],o=r[5],u=r[6],l=r[7],d=r[8],c=i[0],f=i[1],g=i[2],w=i[3],S=i[4],L=i[5],G=i[6],P=i[7],M=i[8];return r[0]=c*t+f*a+g*u,r[1]=c*e+f*s+g*l,r[2]=c*n+f*o+g*d,r[3]=w*t+S*a+L*u,r[4]=w*e+S*s+L*l,r[5]=w*n+S*o+L*d,r[6]=G*t+P*a+M*u,r[7]=G*e+P*s+M*l,r[8]=G*n+P*o+M*d,r}function jt(r,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,e=r[0],n=r[1],a=r[3],s=r[4],o=r[6],u=r[7],l=i.x,d=i.y;return{x:l*e+d*a+o*t,y:l*n+d*s+u*t}}function Rr(r,i){var t=r.height/r.width,e=i.height/i.width;return t<1&&e>1||t>1&&e<1?1:Math.min(Math.max(e,1/e),Math.max(1/t,t))}function Ve(r,i,t,e,n){var a=r.angle,s=r.ratio,o=r.x,u=r.y,l=i.width,d=i.height,c=pe(),f=Math.min(l,d)-2*e,g=Rr(i,t);return n?(Pe(c,yi(pe(),o,u)),Pe(c,lt(pe(),s)),Pe(c,fi(pe(),a)),Pe(c,lt(pe(),l/f/2/g,d/f/2/g))):(Pe(c,lt(pe(),2*(f/l)*g,2*(f/d)*g)),Pe(c,fi(pe(),-a)),Pe(c,lt(pe(),1/s)),Pe(c,yi(pe(),-o,-u))),c}function Pr(r,i,t){var e=jt(r,{x:Math.cos(i.angle),y:Math.sin(i.angle)},0),n=e.x,a=e.y;return 1/Math.sqrt(Math.pow(n,2)+Math.pow(a,2))/t.width}function Mr(r){if(!r.order)return{x:[0,1],y:[0,1]};var i=1/0,t=-1/0,e=1/0,n=-1/0;return r.forEachNode(function(a,s){var o=s.x,u=s.y;o<i&&(i=o),o>t&&(t=o),u<e&&(e=u),u>n&&(n=u)}),{x:[i,t],y:[e,n]}}function Dr(r){if(!vr(r))throw new Error("Sigma: invalid graph instance.");r.forEachNode(function(i,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(i," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function kr(r,i,t){var e=document.createElement(r);if(i)for(var n in i)e.style[n]=i[n];if(t)for(var a in t)e.setAttribute(a,t[a]);return e}function gi(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function pi(r,i,t){return t.sort(function(e,n){var a=i(e)||0,s=i(n)||0;return a<s?-1:a>s?1:0})}function mi(r){var i=Ue(r.x,2),t=i[0],e=i[1],n=Ue(r.y,2),a=n[0],s=n[1],o=Math.max(e-t,s-a),u=(e+t)/2,l=(s+a)/2;(o===0||Math.abs(o)===1/0||isNaN(o))&&(o=1),isNaN(u)&&(u=0),isNaN(l)&&(l=0);var d=function(f){return{x:.5+(f.x-u)/o,y:.5+(f.y-l)/o}};return d.applyTo=function(c){c.x=.5+(c.x-u)/o,c.y=.5+(c.y-l)/o},d.inverse=function(c){return{x:u+o*(c.x-.5),y:l+o*(c.y-.5)}},d.ratio=o,d}function Wt(r){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Wt(r)}function vi(r,i){var t=i.size;if(t!==0){var e=r.length;r.length+=t;var n=0;i.forEach(function(a){r[e+n]=a,n++})}}function St(r){r=r||{};for(var i=0,t=arguments.length<=1?0:arguments.length-1;i<t;i++){var e=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];e&&Object.assign(r,e)}return r}var Zt={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:qn,defaultDrawNodeLabel:en,defaultDrawNodeHover:Vn,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},Gr={circle:ft},xr={arrow:cr,line:gr};function _t(r){if(typeof r.labelDensity!="number"||r.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var i=r.minCameraRatio,t=r.maxCameraRatio;if(typeof i=="number"&&typeof t=="number"&&t<i)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Fr(r){var i=St({},Zt,r);return i.nodeProgramClasses=St({},Gr,i.nodeProgramClasses),i.edgeProgramClasses=St({},xr,i.edgeProgramClasses),i}var dt=1.5,bi=function(r){function i(){var t;return re(this,i),t=ce(this,i),k(t,"x",.5),k(t,"y",.5),k(t,"angle",0),k(t,"ratio",1),k(t,"minRatio",null),k(t,"maxRatio",null),k(t,"enabledZooming",!0),k(t,"enabledPanning",!0),k(t,"enabledRotation",!0),k(t,"clean",null),k(t,"nextFrame",null),k(t,"previousState",null),k(t,"enabled",!0),t.previousState=t.getState(),t}return he(i,r),ae(i,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle}},{key:"getPreviousState",value:function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null}},{key:"getBoundedRatio",value:function(e){var n=e;return typeof this.minRatio=="number"&&(n=Math.max(n,this.minRatio)),typeof this.maxRatio=="number"&&(n=Math.min(n,this.maxRatio)),n}},{key:"validateState",value:function(e){var n={};return this.enabledPanning&&typeof e.x=="number"&&(n.x=e.x),this.enabledPanning&&typeof e.y=="number"&&(n.y=e.y),this.enabledZooming&&typeof e.ratio=="number"&&(n.ratio=this.getBoundedRatio(e.ratio)),this.enabledRotation&&typeof e.angle=="number"&&(n.angle=e.angle),this.clean?this.clean(N(N({},this.getState()),n)):n}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(e){if(!this.enabled)return this;this.previousState=this.getState();var n=this.validateState(e);return typeof n.x=="number"&&(this.x=n.x),typeof n.y=="number"&&(this.y=n.y),typeof n.ratio=="number"&&(this.ratio=n.ratio),typeof n.angle=="number"&&(this.angle=n.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(e){return this.setState(e(this.getState())),this}},{key:"animate",value:function(e){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(g){return n.animate(e,a,g)});if(this.enabled){var o=N(N({},Lr),a),u=this.validateState(e),l=typeof o.easing=="function"?o.easing:Tr[o.easing],d=Date.now(),c=this.getState(),f=function(){var w=(Date.now()-d)/o.duration;if(w>=1){n.nextFrame=null,n.setState(u),n.animationCallback&&(n.animationCallback.call(null),n.animationCallback=void 0);return}var S=l(w),L={};typeof u.x=="number"&&(L.x=c.x+(u.x-c.x)*S),typeof u.y=="number"&&(L.y=c.y+(u.y-c.y)*S),n.enabledRotation&&typeof u.angle=="number"&&(L.angle=c.angle+(u.angle-c.angle)*S),typeof u.ratio=="number"&&(L.ratio=c.ratio+(u.ratio-c.ratio)*S),n.setState(L),n.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(f)):f(),this.animationCallback=s}}},{key:"animatedZoom",value:function(e){return e?typeof e=="number"?this.animate({ratio:this.ratio/e}):this.animate({ratio:this.ratio/(e.factor||dt)},e):this.animate({ratio:this.ratio/dt})}},{key:"animatedUnzoom",value:function(e){return e?typeof e=="number"?this.animate({ratio:this.ratio*e}):this.animate({ratio:this.ratio*(e.factor||dt)},e):this.animate({ratio:this.ratio*dt})}},{key:"animatedReset",value:function(e){return this.animate({x:.5,y:.5,ratio:1,angle:0},e)}},{key:"copy",value:function(){return i.from(this.getState())}}],[{key:"from",value:function(e){var n=new i;return n.setState(e)}}])}(Kt);function me(r,i){var t=i.getBoundingClientRect();return{x:r.clientX-t.left,y:r.clientY-t.top}}function Ae(r,i){var t=N(N({},me(r,i)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:r});return t}function Ke(r){var i="x"in r?r:N(N({},r.touches[0]||r.previousTouches[0]),{},{original:r.original,sigmaDefaultPrevented:r.sigmaDefaultPrevented,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0,i.sigmaDefaultPrevented=!0}});return i}function Ir(r,i){return N(N({},Ae(r,i)),{},{delta:cn(r)})}var Nr=2;function ht(r){for(var i=[],t=0,e=Math.min(r.length,Nr);t<e;t++)i.push(r[t]);return i}function Ze(r,i,t){var e={touches:ht(r.touches).map(function(n){return me(n,t)}),previousTouches:i.map(function(n){return me(n,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:r};return e}function cn(r){if(typeof r.deltaY<"u")return r.deltaY*-3/360;if(typeof r.detail<"u")return r.detail/-9;throw new Error("Captor: could not extract delta from event.")}var hn=function(r){function i(t,e){var n;return re(this,i),n=ce(this,i),n.container=t,n.renderer=e,n}return he(i,r),ae(i)}(Kt),Br=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Or=Br.reduce(function(r,i){return N(N({},r),{},k({},i,Zt[i]))},{}),Ur=function(r){function i(t,e){var n;return re(this,i),n=ce(this,i,[t,e]),k(n,"enabled",!0),k(n,"draggedEvents",0),k(n,"downStartTime",null),k(n,"lastMouseX",null),k(n,"lastMouseY",null),k(n,"isMouseDown",!1),k(n,"isMoving",!1),k(n,"movingTimeout",null),k(n,"startCameraState",null),k(n,"clicks",0),k(n,"doubleClickTimeout",null),k(n,"currentWheelDirection",0),k(n,"settings",Or),n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDown=n.handleDown.bind(n),n.handleUp=n.handleUp.bind(n),n.handleMove=n.handleMove.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleEnter=n.handleEnter.bind(n),t.addEventListener("click",n.handleClick,{capture:!1}),t.addEventListener("contextmenu",n.handleRightClick,{capture:!1}),t.addEventListener("mousedown",n.handleDown,{capture:!1}),t.addEventListener("wheel",n.handleWheel,{capture:!1}),t.addEventListener("mouseleave",n.handleLeave,{capture:!1}),t.addEventListener("mouseenter",n.handleEnter,{capture:!1}),document.addEventListener("mousemove",n.handleMove,{capture:!1}),document.addEventListener("mouseup",n.handleUp,{capture:!1}),n}return he(i,r),ae(i,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseleave",this.handleLeave),e.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(e){var n=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){n.clicks=0,n.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Ae(e,this.container))}}},{key:"handleRightClick",value:function(e){this.enabled&&this.emit("rightClick",Ae(e,this.container))}},{key:"handleDoubleClick",value:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var n=Ae(e,this.container);if(this.emit("doubleClick",n),!n.sigmaDefaultPrevented){var a=this.renderer.getCamera(),s=a.getBoundedRatio(a.getState().ratio/this.settings.doubleClickZoomingRatio);a.animate(this.renderer.getViewportZoomedState(me(e,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(e){if(this.enabled){if(e.button===0){this.startCameraState=this.renderer.getCamera().getState();var n=me(e,this.container),a=n.x,s=n.y;this.lastMouseX=a,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Ae(e,this.container))}}},{key:"handleUp",value:function(e){var n=this;if(!(!this.enabled||!this.isMouseDown)){var a=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=me(e,this.container),o=s.x,u=s.y,l=a.getState(),d=a.getPreviousState()||{x:0,y:0};this.isMoving?a.animate({x:l.x+this.settings.inertiaRatio*(l.x-d.x),y:l.y+this.settings.inertiaRatio*(l.y-d.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==o||this.lastMouseY!==u)&&a.setState({x:l.x,y:l.y}),this.isMoving=!1,setTimeout(function(){var c=n.draggedEvents>0;n.draggedEvents=0,c&&n.renderer.getSetting("hideEdgesOnMove")&&n.renderer.refresh()},0),this.emit("mouseup",Ae(e,this.container))}}},{key:"handleMove",value:function(e){var n=this;if(this.enabled){var a=Ae(e,this.container);if(this.emit("mousemovebody",a),(e.target===this.container||e.composedPath()[0]===this.container)&&this.emit("mousemove",a),!a.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.movingTimeout=null,n.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),o=me(e,this.container),u=o.x,l=o.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),c=this.renderer.viewportToFramedGraph({x:u,y:l}),f=d.x-c.x,g=d.y-c.y,w=s.getState(),S=w.x+f,L=w.y+g;s.setState({x:S,y:L}),this.lastMouseX=u,this.lastMouseY=l,e.preventDefault(),e.stopPropagation()}}}},{key:"handleLeave",value:function(e){this.emit("mouseleave",Ae(e,this.container))}},{key:"handleEnter",value:function(e){this.emit("mouseenter",Ae(e,this.container))}},{key:"handleWheel",value:function(e){var n=this,a=this.renderer.getCamera();if(!(!this.enabled||!a.enabledZooming)){var s=cn(e);if(s){var o=Ir(e,this.container);if(this.emit("wheel",o),o.sigmaDefaultPrevented){e.preventDefault(),e.stopPropagation();return}var u=a.getState().ratio,l=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,d=a.getBoundedRatio(u*l),c=s>0?1:-1,f=Date.now();u!==d&&(e.preventDefault(),e.stopPropagation(),!(this.currentWheelDirection===c&&this.lastWheelTriggerTime&&f-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(a.animate(this.renderer.getViewportZoomedState(me(e,this.container),d),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){n.currentWheelDirection=0}),this.currentWheelDirection=c,this.lastWheelTriggerTime=f))}}}},{key:"setSettings",value:function(e){this.settings=e}}])}(hn),zr=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],$r=zr.reduce(function(r,i){return N(N({},r),{},k({},i,Zt[i]))},{}),Hr=function(r){function i(t,e){var n;return re(this,i),n=ce(this,i,[t,e]),k(n,"enabled",!0),k(n,"isMoving",!1),k(n,"hasMoved",!1),k(n,"touchMode",0),k(n,"startTouchesPositions",[]),k(n,"lastTouches",[]),k(n,"lastTap",null),k(n,"settings",$r),n.handleStart=n.handleStart.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleMove=n.handleMove.bind(n),t.addEventListener("touchstart",n.handleStart,{capture:!1}),t.addEventListener("touchcancel",n.handleLeave,{capture:!1}),document.addEventListener("touchend",n.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",n.handleMove,{capture:!1,passive:!1}),n}return he(i,r),ae(i,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(e){var n=this;if(this.enabled){e.preventDefault();var a=ht(e.touches);if(this.touchMode=a.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=a.map(function(g){return me(g,n.container)}),this.touchMode===2){var s=Ue(this.startTouchesPositions,2),o=s[0],u=o.x,l=o.y,d=s[1],c=d.x,f=d.y;this.startTouchesAngle=Math.atan2(f-l,c-u),this.startTouchesDistance=Math.sqrt(Math.pow(c-u,2)+Math.pow(f-l,2))}this.emit("touchdown",Ze(e,this.lastTouches,this.container)),this.lastTouches=a,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(e){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(e.cancelable&&e.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var n=this.renderer.getCamera(),a=n.getState(),s=n.getPreviousState()||{x:0,y:0};n.animate({x:a.x+this.settings.inertiaRatio*(a.x-s.x),y:a.y+this.settings.inertiaRatio*(a.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Ze(e,this.lastTouches,this.container)),!e.touches.length){var o=me(this.lastTouches[0],this.container),u=this.startTouchesPositions[0],l=Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2);if(!e.touches.length&&l<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var d=Ze(e,this.lastTouches,this.container);if(this.emit("doubletap",d),this.lastTap=null,!d.sigmaDefaultPrevented){var c=this.renderer.getCamera(),f=c.getBoundedRatio(c.getState().ratio/this.settings.doubleClickZoomingRatio);c.animate(this.renderer.getViewportZoomedState(o,f),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var g=Ze(e,this.lastTouches,this.container);this.emit("tap",g),this.lastTap={time:Date.now(),position:g.touches[0]||g.previousTouches[0]}}}this.lastTouches=ht(e.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(e){var n=this;if(!(!this.enabled||!this.startTouchesPositions.length)){e.preventDefault();var a=ht(e.touches),s=a.map(function(X){return me(X,n.container)}),o=this.lastTouches;this.lastTouches=a,this.lastTouchesPositions=s;var u=Ze(e,o,this.container);if(this.emit("touchmove",u),!u.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(X,K){var I=n.startTouchesPositions[K];return I&&(X.x!==I.x||X.y!==I.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.isMoving=!1},this.settings.dragTimeout);var l=this.renderer.getCamera(),d=this.startCameraState,c=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var f=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),g=f.x,w=f.y,S=this.renderer.viewportToFramedGraph(s[0]),L=S.x,G=S.y;l.setState({x:d.x+g-L,y:d.y+w-G});break}case 2:{var P={x:.5,y:.5,angle:0,ratio:1},M=s[0],b=M.x,_=M.y,D=s[1],h=D.x,E=D.y,p=Math.atan2(E-_,h-b)-this.startTouchesAngle,v=Math.hypot(E-_,h-b)/this.startTouchesDistance,T=l.getBoundedRatio(d.ratio/v);P.ratio=T,P.angle=d.angle+p;var R=this.getDimensions(),y=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),H=Math.min(R.width,R.height)-2*c,j=H/R.width,A=H/R.height,m=T/H,U=b-H/2/j,$=_-H/2/A,Z=[U*Math.cos(-P.angle)-$*Math.sin(-P.angle),$*Math.cos(-P.angle)+U*Math.sin(-P.angle)];U=Z[0],$=Z[1],P.x=y.x-U*m,P.y=y.y+$*m,l.setState(P);break}}}}}},{key:"setSettings",value:function(e){this.settings=e}}])}(hn);function jr(r){if(Array.isArray(r))return $t(r)}function Wr(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function qr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(r){return jr(r)||Wr(r)||Vi(r)||qr()}function Vr(r,i){if(r==null)return{};var t={};for(var e in r)if({}.hasOwnProperty.call(r,e)){if(i.indexOf(e)!==-1)continue;t[e]=r[e]}return t}function Ct(r,i){if(r==null)return{};var t,e,n=Vr(r,i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(e=0;e<a.length;e++)t=a[e],i.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}var wi=function(){function r(i,t){re(this,r),this.key=i,this.size=t}return ae(r,null,[{key:"compare",value:function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1}}])}(),Si=function(){function r(){re(this,r),k(this,"width",0),k(this,"height",0),k(this,"cellSize",0),k(this,"columns",0),k(this,"rows",0),k(this,"cells",{})}return ae(r,[{key:"resizeAndClear",value:function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}}},{key:"getIndex",value:function(t){var e=Math.floor(t.x/this.cellSize),n=Math.floor(t.y/this.cellSize);return n*this.columns+e}},{key:"add",value:function(t,e,n){var a=new wi(t,e),s=this.getIndex(n),o=this.cells[s];o||(o=[],this.cells[s]=o),o.push(a)}},{key:"organize",value:function(){for(var t in this.cells){var e=this.cells[t];e.sort(wi.compare)}}},{key:"getLabelsToDisplay",value:function(t,e){var n=this.cellSize*this.cellSize,a=n/t/t,s=a*e/n,o=Math.ceil(s),u=[];for(var l in this.cells)for(var d=this.cells[l],c=0;c<Math.min(o,d.length);c++)u.push(d[c].key);return u}}])}();function Kr(r){var i=r.graph,t=r.hoveredNode,e=r.highlightedNodes,n=r.displayedNodeLabels,a=[];return i.forEachEdge(function(s,o,u,l){(u===t||l===t||e.has(u)||e.has(l)||n.has(u)&&n.has(l))&&a.push(s)}),a}var Zr=150,Yr=50,Te=Object.prototype.hasOwnProperty;function Xr(r,i,t){if(!Te.call(t,"x")||!Te.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(i,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=r.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),Te.call(t,"hidden")||(t.hidden=!1),Te.call(t,"highlighted")||(t.highlighted=!1),Te.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultNodeType),t.zIndex||(t.zIndex=0),t}function Jr(r,i,t){return t.color||(t.color=r.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),Te.call(t,"hidden")||(t.hidden=!1),Te.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var Qr=function(r){function i(t,e){var n,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(re(this,i),n=ce(this,i),k(n,"elements",{}),k(n,"canvasContexts",{}),k(n,"webGLContexts",{}),k(n,"pickingLayers",new Set),k(n,"textures",{}),k(n,"frameBuffers",{}),k(n,"activeListeners",{}),k(n,"labelGrid",new Si),k(n,"nodeDataCache",{}),k(n,"edgeDataCache",{}),k(n,"nodeProgramIndex",{}),k(n,"edgeProgramIndex",{}),k(n,"nodesWithForcedLabels",new Set),k(n,"edgesWithForcedLabels",new Set),k(n,"nodeExtent",{x:[0,1],y:[0,1]}),k(n,"nodeZExtent",[1/0,-1/0]),k(n,"edgeZExtent",[1/0,-1/0]),k(n,"matrix",pe()),k(n,"invMatrix",pe()),k(n,"correctionRatio",1),k(n,"customBBox",null),k(n,"normalizationFunction",mi({x:[0,1],y:[0,1]})),k(n,"graphToViewportRatio",1),k(n,"itemIDsIndex",{}),k(n,"nodeIndices",{}),k(n,"edgeIndices",{}),k(n,"width",0),k(n,"height",0),k(n,"pixelRatio",gi()),k(n,"pickingDownSizingRatio",2*n.pixelRatio),k(n,"displayedNodeLabels",new Set),k(n,"displayedEdgeLabels",new Set),k(n,"highlightedNodes",new Set),k(n,"hoveredNode",null),k(n,"hoveredEdge",null),k(n,"renderFrame",null),k(n,"renderHighlightedNodesFrame",null),k(n,"needToProcess",!1),k(n,"checkEdgesEventsFrame",null),k(n,"nodePrograms",{}),k(n,"nodeHoverPrograms",{}),k(n,"edgePrograms",{}),n.settings=Fr(a),_t(n.settings),Dr(t),!(e instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");n.graph=t,n.container=e,n.createWebGLContext("edges",{picking:a.enableEdgeEvents}),n.createCanvasContext("edgeLabels"),n.createWebGLContext("nodes",{picking:!0}),n.createCanvasContext("labels"),n.createCanvasContext("hovers"),n.createWebGLContext("hoverNodes"),n.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),n.resize();for(var s in n.settings.nodeProgramClasses)n.registerNodeProgram(s,n.settings.nodeProgramClasses[s],n.settings.nodeHoverProgramClasses[s]);for(var o in n.settings.edgeProgramClasses)n.registerEdgeProgram(o,n.settings.edgeProgramClasses[o]);return n.camera=new bi,n.bindCameraHandlers(),n.mouseCaptor=new Ur(n.elements.mouse,n),n.mouseCaptor.setSettings(n.settings),n.touchCaptor=new Hr(n.elements.mouse,n),n.touchCaptor.setSettings(n.settings),n.bindEventHandlers(),n.bindGraphHandlers(),n.handleSettingsUpdate(),n.refresh(),n}return he(i,r),ae(i,[{key:"registerNodeProgram",value:function(e,n,a){return this.nodePrograms[e]&&this.nodePrograms[e].kill(),this.nodeHoverPrograms[e]&&this.nodeHoverPrograms[e].kill(),this.nodePrograms[e]=new n(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[e]=new(a||n)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(e,n){return this.edgePrograms[e]&&this.edgePrograms[e].kill(),this.edgePrograms[e]=new n(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(e){if(this.nodePrograms[e]){var n=this.nodePrograms,a=n[e],s=Ct(n,[e].map(Qe));a.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[e]){var o=this.nodeHoverPrograms,u=o[e],l=Ct(o,[e].map(Qe));u.kill(),this.nodePrograms=l}return this}},{key:"unregisterEdgeProgram",value:function(e){if(this.edgePrograms[e]){var n=this.edgePrograms,a=n[e],s=Ct(n,[e].map(Qe));a.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(e){var n=this.webGLContexts[e],a=this.frameBuffers[e],s=this.textures[e];s&&n.deleteTexture(s);var o=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,a),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),this.textures[e]=o,this}},{key:"bindCameraHandlers",value:function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(e){var n=e.x,a=e.y,s=ni(this.webGLContexts.nodes,this.frameBuffers.nodes,n,a,this.pixelRatio,this.pickingDownSizingRatio),o=ii.apply(void 0,Ei(s)),u=this.itemIDsIndex[o];return u&&u.type==="node"?u.id:null}},{key:"bindEventHandlers",value:function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(a){var s=Ke(a),o={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},u=e.getNodeAtPosition(s);if(u&&e.hoveredNode!==u&&!e.nodeDataCache[u].hidden){e.hoveredNode&&e.emit("leaveNode",N(N({},o),{},{node:e.hoveredNode})),e.hoveredNode=u,e.emit("enterNode",N(N({},o),{},{node:u})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(s)!==e.hoveredNode){var l=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",N(N({},o),{},{node:l})),e.scheduleHighlightedNodesRender();return}if(e.settings.enableEdgeEvents){var d=e.hoveredNode?null:e.getEdgeAtPoint(o.event.x,o.event.y);d!==e.hoveredEdge&&(e.hoveredEdge&&e.emit("leaveEdge",N(N({},o),{},{edge:e.hoveredEdge})),d&&e.emit("enterEdge",N(N({},o),{},{edge:d})),e.hoveredEdge=d)}},this.activeListeners.handleMoveBody=function(a){var s=Ke(a);e.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(a){var s=Ke(a),o={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};e.hoveredNode&&(e.emit("leaveNode",N(N({},o),{},{node:e.hoveredNode})),e.scheduleHighlightedNodesRender()),e.settings.enableEdgeEvents&&e.hoveredEdge&&(e.emit("leaveEdge",N(N({},o),{},{edge:e.hoveredEdge})),e.scheduleHighlightedNodesRender()),e.emit("leaveStage",N({},o))},this.activeListeners.handleEnter=function(a){var s=Ke(a),o={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};e.emit("enterStage",N({},o))};var n=function(s){return function(o){var u=Ke(o),l={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},d=e.getNodeAtPosition(u);if(d)return e.emit("".concat(s,"Node"),N(N({},l),{},{node:d}));if(e.settings.enableEdgeEvents){var c=e.getEdgeAtPoint(u.x,u.y);if(c)return e.emit("".concat(s,"Edge"),N(N({},l),{},{edge:c}))}return e.emit("".concat(s,"Stage"),l)}};return this.activeListeners.handleClick=n("click"),this.activeListeners.handleRightClick=n("rightClick"),this.activeListeners.handleDoubleClick=n("doubleClick"),this.activeListeners.handleWheel=n("wheel"),this.activeListeners.handleDown=n("down"),this.activeListeners.handleUp=n("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var e=this,n=this.graph,a=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var o,u=(o=s.hints)===null||o===void 0?void 0:o.attributes;e.graph.forEachNode(function(d){return e.updateNode(d)});var l=!u||u.some(function(d){return a.has(d)});e.refresh({partialGraph:{nodes:n.nodes()},skipIndexation:!l,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var o,u=(o=s.hints)===null||o===void 0?void 0:o.attributes;e.graph.forEachEdge(function(d){return e.updateEdge(d)});var l=u&&["zIndex","type"].some(function(d){return u==null?void 0:u.includes(d)});e.refresh({partialGraph:{edges:n.edges()},skipIndexation:!l,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var o=s.key;e.addNode(o),e.refresh({partialGraph:{nodes:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){var o=s.key;e.refresh({partialGraph:{nodes:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){var o=s.key;e.removeNode(o),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var o=s.key;e.addEdge(o),e.refresh({partialGraph:{edges:[o]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){var o=s.key;e.refresh({partialGraph:{edges:[o]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){var o=s.key;e.removeEdge(o),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},n.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(e,n){var a=ni(this.webGLContexts.edges,this.frameBuffers.edges,e,n,this.pixelRatio,this.pickingDownSizingRatio),s=ii.apply(void 0,Ei(a)),o=this.itemIDsIndex[s];return o&&o.type==="edge"?o.id:null}},{key:"process",value:function(){var e=this;this.emit("beforeProcess");var n=this.graph,a=this.settings,s=this.getDimensions();if(this.nodeExtent=Mr(this.graph),!this.settings.autoRescale){var o=s.width,u=s.height,l=this.nodeExtent,d=l.x,c=l.y;this.nodeExtent={x:[(d[0]+d[1])/2-o/2,(d[0]+d[1])/2+o/2],y:[(c[0]+c[1])/2-u/2,(c[0]+c[1])/2+u/2]}}this.normalizationFunction=mi(this.customBBox||this.nodeExtent);var f=new bi,g=Ve(f.getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,a.labelGridCellSize);for(var w={},S={},L={},G={},P=1,M=n.nodes(),b=0,_=M.length;b<_;b++){var D=M[b],h=this.nodeDataCache[D],E=n.getNodeAttributes(D);h.x=E.x,h.y=E.y,this.normalizationFunction.applyTo(h),typeof h.label=="string"&&!h.hidden&&this.labelGrid.add(D,h.size,this.framedGraphToViewport(h,{matrix:g})),w[h.type]=(w[h.type]||0)+1}this.labelGrid.organize();for(var p in this.nodePrograms){if(!Te.call(this.nodePrograms,p))throw new Error('Sigma: could not find a suitable program for node type "'.concat(p,'"!'));this.nodePrograms[p].reallocate(w[p]||0),w[p]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(M=pi(this.nodeZExtent,function(Q){return e.nodeDataCache[Q].zIndex},M));for(var v=0,T=M.length;v<T;v++){var R=M[v];S[R]=P,G[S[R]]={type:"node",id:R},P++;var y=this.nodeDataCache[R];this.addNodeToProgram(R,S[R],w[y.type]++)}for(var H={},j=n.edges(),A=0,m=j.length;A<m;A++){var U=j[A],$=this.edgeDataCache[U];H[$.type]=(H[$.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(j=pi(this.edgeZExtent,function(Q){return e.edgeDataCache[Q].zIndex},j));for(var Z in this.edgePrograms){if(!Te.call(this.edgePrograms,Z))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Z,'"!'));this.edgePrograms[Z].reallocate(H[Z]||0),H[Z]=0}for(var X=0,K=j.length;X<K;X++){var I=j[X];L[I]=P,G[L[I]]={type:"edge",id:I},P++;var se=this.edgeDataCache[I];this.addEdgeToProgram(I,L[I],H[se.type]++)}return this.itemIDsIndex=G,this.nodeIndices=S,this.edgeIndices=L,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(e){var n=this,a=this.settings;if(this.camera.minRatio=a.minCameraRatio,this.camera.maxRatio=a.maxCameraRatio,this.camera.enabledZooming=a.enableCameraZooming,this.camera.enabledPanning=a.enableCameraPanning,this.camera.enabledRotation=a.enableCameraRotation,a.cameraPanBoundaries?this.camera.clean=function(d){return n.cleanCameraState(d,a.cameraPanBoundaries&&Wt(a.cameraPanBoundaries)==="object"?a.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),e){if(e.edgeProgramClasses!==a.edgeProgramClasses){for(var s in a.edgeProgramClasses)a.edgeProgramClasses[s]!==e.edgeProgramClasses[s]&&this.registerEdgeProgram(s,a.edgeProgramClasses[s]);for(var o in e.edgeProgramClasses)a.edgeProgramClasses[o]||this.unregisterEdgeProgram(o)}if(e.nodeProgramClasses!==a.nodeProgramClasses||e.nodeHoverProgramClasses!==a.nodeHoverProgramClasses){for(var u in a.nodeProgramClasses)(a.nodeProgramClasses[u]!==e.nodeProgramClasses[u]||a.nodeHoverProgramClasses[u]!==e.nodeHoverProgramClasses[u])&&this.registerNodeProgram(u,a.nodeProgramClasses[u],a.nodeHoverProgramClasses[u]);for(var l in e.nodeProgramClasses)a.nodeProgramClasses[l]||this.unregisterNodeProgram(l)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.tolerance,s=a===void 0?0:a,o=n.boundaries,u=N({},e),l=o||this.nodeExtent,d=Ue(l.x,2),c=d[0],f=d[1],g=Ue(l.y,2),w=g[0],S=g[1],L=[this.graphToViewport({x:c,y:w},{cameraState:e}),this.graphToViewport({x:f,y:w},{cameraState:e}),this.graphToViewport({x:c,y:S},{cameraState:e}),this.graphToViewport({x:f,y:S},{cameraState:e})],G=1/0,P=-1/0,M=1/0,b=-1/0;L.forEach(function(H){var j=H.x,A=H.y;G=Math.min(G,j),P=Math.max(P,j),M=Math.min(M,A),b=Math.max(b,A)});var _=P-G,D=b-M,h=this.getDimensions(),E=h.width,p=h.height,v=0,T=0;if(_>=E?P<E-s?v=P-(E-s):G>s&&(v=G-s):P>E+s?v=P-(E+s):G<-s&&(v=G+s),D>=p?b<p-s?T=b-(p-s):M>s&&(T=M-s):b>p+s?T=b-(p+s):M<-s&&(T=M+s),v||T){var R=this.viewportToFramedGraph({x:0,y:0},{cameraState:e}),y=this.viewportToFramedGraph({x:v,y:T},{cameraState:e});v=y.x-R.x,T=y.y-R.y,u.x+=v,u.y+=T}return u}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),n=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);vi(n,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var a=this.canvasContexts.labels,s=0,o=n.length;s<o;s++){var u=n[s],l=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!l.hidden){var d=this.framedGraphToViewport(l),c=d.x,f=d.y,g=this.scaleSize(l.size);if(!(!l.forceLabel&&g<this.settings.labelRenderedSizeThreshold)&&!(c<-150||c>this.width+Zr||f<-50||f>this.height+Yr)){this.displayedNodeLabels.add(u);var w=this.settings.defaultDrawNodeLabel,S=this.nodePrograms[l.type],L=(S==null?void 0:S.drawLabel)||w;L(a,N(N({key:u},l),{},{size:g,x:c,y:f}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);var n=Kr({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});vi(n,this.edgesWithForcedLabels);for(var a=new Set,s=0,o=n.length;s<o;s++){var u=n[s],l=this.graph.extremities(u),d=this.nodeDataCache[l[0]],c=this.nodeDataCache[l[1]],f=this.edgeDataCache[u];if(!a.has(u)&&!(f.hidden||d.hidden||c.hidden)){var g=this.settings.defaultDrawEdgeLabel,w=this.edgePrograms[f.type],S=(w==null?void 0:w.drawLabel)||g;S(e,N(N({key:u},f),{},{size:this.scaleSize(f.size)}),N(N(N({key:l[0]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),N(N(N({key:l[1]},c),this.framedGraphToViewport(c)),{},{size:this.scaleSize(c.size)}),this.settings),a.add(u)}}return this.displayedEdgeLabels=a,this}},{key:"renderHighlightedNodes",value:function(){var e=this,n=this.canvasContexts.hovers;n.clearRect(0,0,this.width,this.height);var a=function(g){var w=e.nodeDataCache[g],S=e.framedGraphToViewport(w),L=S.x,G=S.y,P=e.scaleSize(w.size),M=e.settings.defaultDrawNodeHover,b=e.nodePrograms[w.type],_=(b==null?void 0:b.drawHover)||M;_(n,N(N({key:g},w),{},{size:P,x:L,y:G}),e.settings)},s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(f){f!==e.hoveredNode&&s.push(f)}),s.forEach(function(f){return a(f)});var o={};s.forEach(function(f){var g=e.nodeDataCache[f].type;o[g]=(o[g]||0)+1});for(var u in this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(o[u]||0),o[u]=0;s.forEach(function(f){var g=e.nodeDataCache[f];e.nodeHoverPrograms[g.type].process(0,o[g.type]++,g)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var l=this.getRenderParams();for(var d in this.nodeHoverPrograms){var c=this.nodeHoverPrograms[d];c.render(l)}}},{key:"scheduleHighlightedNodesRender",value:function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))}},{key:"render",value:function(){var e=this;this.emit("beforeRender");var n=function(){return e.emit("afterRender"),e};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(L){return e.resetWebGLTexture(L)}),!this.graph.order)return n();var a=this.mouseCaptor,s=this.camera.isAnimated()||a.isMoving||a.draggedEvents||a.currentWheelDirection,o=this.camera.getState(),u=this.getDimensions(),l=this.getGraphDimensions(),d=this.getStagePadding();this.matrix=Ve(o,u,l,d),this.invMatrix=Ve(o,u,l,d,!0),this.correctionRatio=Pr(this.matrix,o,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var c=this.getRenderParams();for(var f in this.nodePrograms){var g=this.nodePrograms[f];g.render(c)}if(!this.settings.hideEdgesOnMove||!s)for(var w in this.edgePrograms){var S=this.edgePrograms[w];S.render(c)}return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),n()}},{key:"addNode",value:function(e){var n=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(n=this.settings.nodeReducer(e,n));var a=Xr(this.settings,e,n);this.nodeDataCache[e]=a,this.nodesWithForcedLabels.delete(e),a.forceLabel&&!a.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),a.highlighted&&!a.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(a.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=a.zIndex),a.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=a.zIndex))}},{key:"updateNode",value:function(e){this.addNode(e);var n=this.nodeDataCache[e];this.normalizationFunction.applyTo(n)}},{key:"removeNode",value:function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)}},{key:"addEdge",value:function(e){var n=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(n=this.settings.edgeReducer(e,n));var a=Jr(this.settings,e,n);this.edgeDataCache[e]=a,this.edgesWithForcedLabels.delete(e),a.forceLabel&&!a.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(a.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=a.zIndex),a.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=a.zIndex))}},{key:"updateEdge",value:function(e){this.addEdge(e)}},{key:"removeEdge",value:function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Si,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(e,n,a){var s=this.nodeDataCache[e],o=this.nodePrograms[s.type];if(!o)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));o.process(n,a,s),this.nodeProgramIndex[e]=a}},{key:"addEdgeToProgram",value:function(e,n,a){var s=this.edgeDataCache[e],o=this.edgePrograms[s.type];if(!o)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var u=this.graph.extremities(e),l=this.nodeDataCache[u[0]],d=this.nodeDataCache[u[1]];o.process(n,a,l,d,s),this.edgeProgramIndex[e]=a}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var e=this.settings,n=e.stagePadding,a=e.autoRescale;return a&&n||0}},{key:"createLayer",value:function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[e])throw new Error('Sigma: a layer named "'.concat(e,'" already exists'));var s=kr(n,{position:"absolute"},{class:"sigma-".concat(e)});return a.style&&Object.assign(s.style,a.style),this.elements[e]=s,"beforeLayer"in a&&a.beforeLayer?this.elements[a.beforeLayer].before(s):"afterLayer"in a&&a.afterLayer?this.elements[a.afterLayer].after(s):this.container.appendChild(s),s}},{key:"createCanvas",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(e,"canvas",n)}},{key:"createCanvasContext",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.createCanvas(e,n),s={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=a.getContext("2d",s),this}},{key:"createWebGLContext",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(n==null?void 0:n.canvas)||this.createCanvas(e,n);n.hidden&&a.remove();var s=N({preserveDrawingBuffer:!1,antialias:!1},n),o;o=a.getContext("webgl2",s),o||(o=a.getContext("webgl",s)),o||(o=a.getContext("experimental-webgl",s));var u=o;if(this.webGLContexts[e]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),n.picking){this.pickingLayers.add(e);var l=u.createFramebuffer();if(!l)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=l}return u}},{key:"killLayer",value:function(e){var n=this.elements[e];if(!n)throw new Error("Sigma: cannot kill layer ".concat(e,", which does not exist"));if(this.webGLContexts[e]){var a,s=this.webGLContexts[e];(a=s.getExtension("WEBGL_lose_context"))===null||a===void 0||a.loseContext(),delete this.webGLContexts[e]}else this.canvasContexts[e]&&delete this.canvasContexts[e];return n.remove(),delete this.elements[e],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(e){e!==this.graph&&(this.hoveredNode&&!e.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!e.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}}},{key:"getNodeDisplayData",value:function(e){var n=this.nodeDataCache[e];return n?Object.assign({},n):void 0}},{key:"getEdgeDisplayData",value:function(e){var n=this.edgeDataCache[e];return n?Object.assign({},n):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return N({},this.settings)}},{key:"getSetting",value:function(e){return this.settings[e]}},{key:"setSetting",value:function(e,n){var a=N({},this.settings);return this.settings[e]=n,_t(this.settings),this.handleSettingsUpdate(a),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(e,n){return this.setSetting(e,n(this.settings[e])),this}},{key:"setSettings",value:function(e){var n=N({},this.settings);return this.settings=N(N({},this.settings),e),_t(this.settings),this.handleSettingsUpdate(n),this.scheduleRefresh(),this}},{key:"resize",value:function(e){var n=this.width,a=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=gi(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!e&&n===this.width&&a===this.height)return this;for(var s in this.elements){var o=this.elements[s];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var u in this.canvasContexts)this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[u].scale(this.pixelRatio,this.pixelRatio);for(var l in this.webGLContexts){this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px");var d=this.webGLContexts[l];if(d.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(l)){var c=this.textures[l];c&&d.deleteTexture(c)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(e){var n=this,a=(e==null?void 0:e.skipIndexation)!==void 0?e==null?void 0:e.skipIndexation:!1,s=(e==null?void 0:e.schedule)!==void 0?e.schedule:!1,o=!e||!e.partialGraph;if(o)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(b){return n.addNode(b)}),this.graph.forEachEdge(function(b){return n.addEdge(b)});else{for(var u,l,d=((u=e.partialGraph)===null||u===void 0?void 0:u.nodes)||[],c=0,f=(d==null?void 0:d.length)||0;c<f;c++){var g=d[c];if(this.updateNode(g),a){var w=this.nodeProgramIndex[g];if(w===void 0)throw new Error('Sigma: node "'.concat(g,`" can't be repaint`));this.addNodeToProgram(g,this.nodeIndices[g],w)}}for(var S=(e==null||(l=e.partialGraph)===null||l===void 0?void 0:l.edges)||[],L=0,G=S.length;L<G;L++){var P=S[L];if(this.updateEdge(P),a){var M=this.edgeProgramIndex[P];if(M===void 0)throw new Error('Sigma: edge "'.concat(P,`" can't be repaint`));this.addEdgeToProgram(P,this.edgeIndices[P],M)}}}return(o||!a)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var e=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){e.render()})),this}},{key:"scheduleRefresh",value:function(e){return this.refresh(N(N({},e),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(e,n){var a=this.camera.getState(),s=a.ratio,o=a.angle,u=a.x,l=a.y,d=this.settings,c=d.minCameraRatio,f=d.maxCameraRatio;typeof f=="number"&&(n=Math.min(n,f)),typeof c=="number"&&(n=Math.max(n,c));var g=n/s,w={x:this.width/2,y:this.height/2},S=this.viewportToFramedGraph(e),L=this.viewportToFramedGraph(w);return{angle:o,x:(S.x-L.x)*(1-g)+u,y:(S.y-L.y)*(1-g)+l,ratio:n}}},{key:"viewRectangle",value:function(){var e=this.viewportToFramedGraph({x:0,y:0}),n=this.viewportToFramedGraph({x:this.width,y:0}),a=this.viewportToFramedGraph({x:0,y:this.height});return{x1:e.x,y1:e.y,x2:n.x,y2:n.y,height:n.y-a.y}}},{key:"framedGraphToViewport",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!n.cameraState||!!n.viewportDimensions||!!n.graphDimensions,s=n.matrix?n.matrix:a?Ve(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getStagePadding()):this.matrix,o=jt(s,e);return{x:(1+o.x)*this.width/2,y:(1-o.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!n.cameraState||!!n.viewportDimensions||!n.graphDimensions,s=n.matrix?n.matrix:a?Ve(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getStagePadding(),!0):this.invMatrix,o=jt(s,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),o}},{key:"viewportToGraph",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(e,n))}},{key:"graphToViewport",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(e),n)}},{key:"getGraphToViewportRatio",value:function(){var e={x:0,y:0},n={x:1,y:1},a=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=this.graphToViewport(e),o=this.graphToViewport(n),u=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2));return u/a}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(e){return this.customBBox=e,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild);for(var n in this.nodePrograms)this.nodePrograms[n].kill();for(var a in this.nodeHoverPrograms)this.nodeHoverPrograms[a].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var o in this.elements)this.killLayer(o);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return e/this.settings.zoomToSizeRatioFunction(n)*(this.getSetting("itemSizesReference")==="positions"?n*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var e={};for(var n in this.elements)this.elements[n]instanceof HTMLCanvasElement&&(e[n]=this.elements[n]);return e}}])}(Kt),ea=Qr;function ta(){const r=arguments[0];for(let i=1,t=arguments.length;i<t;i++)if(arguments[i])for(const e in arguments[i])r[e]=arguments[i][e];return r}let ee=ta;typeof Object.assign=="function"&&(ee=Object.assign);function de(r,i,t,e){const n=r._nodes.get(i);let a=null;return n&&(e==="mixed"?a=n.out&&n.out[t]||n.undirected&&n.undirected[t]:e==="directed"?a=n.out&&n.out[t]:a=n.undirected&&n.undirected[t]),a}function ie(r){return typeof r=="object"&&r!==null}function fn(r){let i;for(i in r)return!1;return!0}function le(r,i,t){Object.defineProperty(r,i,{enumerable:!1,configurable:!1,writable:!0,value:t})}function ge(r,i,t){const e={enumerable:!0,configurable:!0};typeof t=="function"?e.get=t:(e.value=t,e.writable=!1),Object.defineProperty(r,i,e)}function _i(r){return!(!ie(r)||r.attributes&&!Array.isArray(r.attributes))}function ia(){let r=Math.floor(Math.random()*256)&255;return()=>r++}function Le(){const r=arguments;let i=null,t=-1;return{[Symbol.iterator](){return this},next(){let e=null;do{if(i===null){if(t++,t>=r.length)return{done:!0};i=r[t][Symbol.iterator]()}if(e=i.next(),e.done){i=null;continue}break}while(!0);return e}}}function $e(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class Yt extends Error{constructor(i){super(),this.name="GraphError",this.message=i}}class F extends Yt{constructor(i){super(i),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,F.prototype.constructor)}}class x extends Yt{constructor(i){super(i),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,x.prototype.constructor)}}class z extends Yt{constructor(i){super(i),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,z.prototype.constructor)}}function yn(r,i){this.key=r,this.attributes=i,this.clear()}yn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function gn(r,i){this.key=r,this.attributes=i,this.clear()}gn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function pn(r,i){this.key=r,this.attributes=i,this.clear()}pn.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function He(r,i,t,e,n){this.key=i,this.attributes=n,this.undirected=r,this.source=t,this.target=e}He.prototype.attach=function(){let r="out",i="in";this.undirected&&(r=i="undirected");const t=this.source.key,e=this.target.key;this.source[r][e]=this,!(this.undirected&&t===e)&&(this.target[i][t]=this)};He.prototype.attachMulti=function(){let r="out",i="in";const t=this.source.key,e=this.target.key;this.undirected&&(r=i="undirected");const n=this.source[r],a=n[e];if(typeof a>"u"){n[e]=this,this.undirected&&t===e||(this.target[i][t]=this);return}a.previous=this,this.next=a,n[e]=this,this.target[i][t]=this};He.prototype.detach=function(){const r=this.source.key,i=this.target.key;let t="out",e="in";this.undirected&&(t=e="undirected"),delete this.source[t][i],delete this.target[e][r]};He.prototype.detachMulti=function(){const r=this.source.key,i=this.target.key;let t="out",e="in";this.undirected&&(t=e="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][i],delete this.target[e][r]):(this.next.previous=void 0,this.source[t][i]=this.next,this.target[e][r]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const mn=0,vn=1,na=2,bn=3;function Re(r,i,t,e,n,a,s){let o,u,l,d;if(e=""+e,t===mn){if(o=r._nodes.get(e),!o)throw new x(`Graph.${i}: could not find the "${e}" node in the graph.`);l=n,d=a}else if(t===bn){if(n=""+n,u=r._edges.get(n),!u)throw new x(`Graph.${i}: could not find the "${n}" edge in the graph.`);const c=u.source.key,f=u.target.key;if(e===c)o=u.target;else if(e===f)o=u.source;else throw new x(`Graph.${i}: the "${e}" node is not attached to the "${n}" edge (${c}, ${f}).`);l=a,d=s}else{if(u=r._edges.get(e),!u)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`);t===vn?o=u.source:o=u.target,l=n,d=a}return[o,l,d]}function ra(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);return s.attributes[o]}}function aa(r,i,t){r.prototype[i]=function(e,n){const[a]=Re(this,i,t,e,n);return a.attributes}}function sa(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);return s.attributes.hasOwnProperty(o)}}function oa(r,i,t){r.prototype[i]=function(e,n,a,s){const[o,u,l]=Re(this,i,t,e,n,a,s);return o.attributes[u]=l,this.emit("nodeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:u}),this}}function ua(r,i,t){r.prototype[i]=function(e,n,a,s){const[o,u,l]=Re(this,i,t,e,n,a,s);if(typeof l!="function")throw new F(`Graph.${i}: updater should be a function.`);const d=o.attributes,c=l(d[u]);return d[u]=c,this.emit("nodeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:u}),this}}function la(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);return delete s.attributes[o],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:o}),this}}function da(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);if(!ie(o))throw new F(`Graph.${i}: provided attributes are not a plain object.`);return s.attributes=o,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function ca(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);if(!ie(o))throw new F(`Graph.${i}: provided attributes are not a plain object.`);return ee(s.attributes,o),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:o}),this}}function ha(r,i,t){r.prototype[i]=function(e,n,a){const[s,o]=Re(this,i,t,e,n,a);if(typeof o!="function")throw new F(`Graph.${i}: provided updater is not a function.`);return s.attributes=o(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const fa=[{name:r=>`get${r}Attribute`,attacher:ra},{name:r=>`get${r}Attributes`,attacher:aa},{name:r=>`has${r}Attribute`,attacher:sa},{name:r=>`set${r}Attribute`,attacher:oa},{name:r=>`update${r}Attribute`,attacher:ua},{name:r=>`remove${r}Attribute`,attacher:la},{name:r=>`replace${r}Attributes`,attacher:da},{name:r=>`merge${r}Attributes`,attacher:ca},{name:r=>`update${r}Attributes`,attacher:ha}];function ya(r){fa.forEach(function({name:i,attacher:t}){t(r,i("Node"),mn),t(r,i("Source"),vn),t(r,i("Target"),na),t(r,i("Opposite"),bn)})}function ga(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}return a.attributes[n]}}function pa(r,i,t){r.prototype[i]=function(e){let n;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+arguments[1];if(n=de(this,a,s,t),!n)throw new x(`Graph.${i}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,n=this._edges.get(e),!n)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}return n.attributes}}function ma(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}return a.attributes.hasOwnProperty(n)}}function va(r,i,t){r.prototype[i]=function(e,n,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,u=""+n;if(n=arguments[2],a=arguments[3],s=de(this,o,u,t),!s)throw new x(`Graph.${i}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,s=this._edges.get(e),!s)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}return s.attributes[n]=a,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:n}),this}}function ba(r,i,t){r.prototype[i]=function(e,n,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,u=""+n;if(n=arguments[2],a=arguments[3],s=de(this,o,u,t),!s)throw new x(`Graph.${i}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,s=this._edges.get(e),!s)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}if(typeof a!="function")throw new F(`Graph.${i}: updater should be a function.`);return s.attributes[n]=a(s.attributes[n]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:n}),this}}function Ea(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}return delete a.attributes[n],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:n}),this}}function wa(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}if(!ie(n))throw new F(`Graph.${i}: provided attributes are not a plain object.`);return a.attributes=n,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Sa(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}if(!ie(n))throw new F(`Graph.${i}: provided attributes are not a plain object.`);return ee(a.attributes,n),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:n}),this}}function _a(r,i,t){r.prototype[i]=function(e,n){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new z(`Graph.${i}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new z(`Graph.${i}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,o=""+n;if(n=arguments[2],a=de(this,s,o,t),!a)throw new x(`Graph.${i}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new z(`Graph.${i}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new x(`Graph.${i}: could not find the "${e}" edge in the graph.`)}if(typeof n!="function")throw new F(`Graph.${i}: provided updater is not a function.`);return a.attributes=n(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Ca=[{name:r=>`get${r}Attribute`,attacher:ga},{name:r=>`get${r}Attributes`,attacher:pa},{name:r=>`has${r}Attribute`,attacher:ma},{name:r=>`set${r}Attribute`,attacher:va},{name:r=>`update${r}Attribute`,attacher:ba},{name:r=>`remove${r}Attribute`,attacher:Ea},{name:r=>`replace${r}Attributes`,attacher:wa},{name:r=>`merge${r}Attributes`,attacher:Sa},{name:r=>`update${r}Attributes`,attacher:_a}];function Aa(r){Ca.forEach(function({name:i,attacher:t}){t(r,i("Edge"),"mixed"),t(r,i("DirectedEdge"),"directed"),t(r,i("UndirectedEdge"),"undirected")})}const Ta=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function La(r,i,t,e){let n=!1;for(const a in i){if(a===e)continue;const s=i[a];if(n=t(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),r&&n)return s.key}}function Ra(r,i,t,e){let n,a,s,o=!1;for(const u in i)if(u!==e){n=i[u];do{if(a=n.source,s=n.target,o=t(n.key,n.attributes,a.key,s.key,a.attributes,s.attributes,n.undirected),r&&o)return n.key;n=n.next}while(n!==void 0)}}function At(r,i){const t=Object.keys(r),e=t.length;let n,a=0;return{[Symbol.iterator](){return this},next(){do if(n)n=n.next;else{if(a>=e)return{done:!0};const s=t[a++];if(s===i){n=void 0;continue}n=r[s]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}}}function Pa(r,i,t,e){const n=i[t];if(!n)return;const a=n.source,s=n.target;if(e(n.key,n.attributes,a.key,s.key,a.attributes,s.attributes,n.undirected)&&r)return n.key}function Ma(r,i,t,e){let n=i[t];if(!n)return;let a=!1;do{if(a=e(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),r&&a)return n.key;n=n.next}while(n!==void 0)}function Tt(r,i){let t=r[i];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const n={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:n}}};let e=!1;return{[Symbol.iterator](){return this},next(){return e===!0?{done:!0}:(e=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function Da(r,i){if(r.size===0)return[];if(i==="mixed"||i===r.type)return Array.from(r._edges.keys());const t=i==="undirected"?r.undirectedSize:r.directedSize,e=new Array(t),n=i==="undirected",a=r._edges.values();let s=0,o,u;for(;o=a.next(),o.done!==!0;)u=o.value,u.undirected===n&&(e[s++]=u.key);return e}function En(r,i,t,e){if(i.size===0)return;const n=t!=="mixed"&&t!==i.type,a=t==="undirected";let s,o,u=!1;const l=i._edges.values();for(;s=l.next(),s.done!==!0;){if(o=s.value,n&&o.undirected!==a)continue;const{key:d,attributes:c,source:f,target:g}=o;if(u=e(d,c,f.key,g.key,f.attributes,g.attributes,o.undirected),r&&u)return d}}function ka(r,i){if(r.size===0)return $e();const t=i!=="mixed"&&i!==r.type,e=i==="undirected",n=r._edges.values();return{[Symbol.iterator](){return this},next(){let a,s;for(;;){if(a=n.next(),a.done)return a;if(s=a.value,!(t&&s.undirected!==e))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}}}}function Xt(r,i,t,e,n,a){const s=i?Ra:La;let o;if(t!=="undirected"&&(e!=="out"&&(o=s(r,n.in,a),r&&o)||e!=="in"&&(o=s(r,n.out,a,e?void 0:n.key),r&&o))||t!=="directed"&&(o=s(r,n.undirected,a),r&&o))return o}function Ga(r,i,t,e){const n=[];return Xt(!1,r,i,t,e,function(a){n.push(a)}),n}function xa(r,i,t){let e=$e();return r!=="undirected"&&(i!=="out"&&typeof t.in<"u"&&(e=Le(e,At(t.in))),i!=="in"&&typeof t.out<"u"&&(e=Le(e,At(t.out,i?void 0:t.key)))),r!=="directed"&&typeof t.undirected<"u"&&(e=Le(e,At(t.undirected))),e}function Jt(r,i,t,e,n,a,s){const o=t?Ma:Pa;let u;if(i!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&(u=o(r,n.in,a,s),r&&u)||typeof n.out<"u"&&e!=="in"&&(e||n.key!==a)&&(u=o(r,n.out,a,s),r&&u))||i!=="directed"&&typeof n.undirected<"u"&&(u=o(r,n.undirected,a,s),r&&u))return u}function Fa(r,i,t,e,n){const a=[];return Jt(!1,r,i,t,e,n,function(s){a.push(s)}),a}function Ia(r,i,t,e){let n=$e();return r!=="undirected"&&(typeof t.in<"u"&&i!=="out"&&e in t.in&&(n=Le(n,Tt(t.in,e))),typeof t.out<"u"&&i!=="in"&&e in t.out&&(i||t.key!==e)&&(n=Le(n,Tt(t.out,e)))),r!=="directed"&&typeof t.undirected<"u"&&e in t.undirected&&(n=Le(n,Tt(t.undirected,e))),n}function Na(r,i){const{name:t,type:e,direction:n}=i;r.prototype[t]=function(a,s){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return[];if(!arguments.length)return Da(this,e);if(arguments.length===1){a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new x(`Graph.${t}: could not find the "${a}" node in the graph.`);return Ga(this.multi,e==="mixed"?this.type:e,n,o)}if(arguments.length===2){a=""+a,s=""+s;const o=this._nodes.get(a);if(!o)throw new x(`Graph.${t}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new x(`Graph.${t}:  could not find the "${s}" target node in the graph.`);return Fa(e,this.multi,n,o,s)}throw new F(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ba(r,i){const{name:t,type:e,direction:n}=i,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(l,d,c){if(!(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)){if(arguments.length===1)return c=l,En(!1,this,e,c);if(arguments.length===2){l=""+l,c=d;const f=this._nodes.get(l);if(typeof f>"u")throw new x(`Graph.${a}: could not find the "${l}" node in the graph.`);return Xt(!1,this.multi,e==="mixed"?this.type:e,n,f,c)}if(arguments.length===3){l=""+l,d=""+d;const f=this._nodes.get(l);if(!f)throw new x(`Graph.${a}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(d))throw new x(`Graph.${a}:  could not find the "${d}" target node in the graph.`);return Jt(!1,e,this.multi,n,f,d,c)}throw new F(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+t[0].toUpperCase()+t.slice(1);r.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),d=l.pop();let c;if(l.length===0){let f=0;e!=="directed"&&(f+=this.undirectedSize),e!=="undirected"&&(f+=this.directedSize),c=new Array(f);let g=0;l.push((w,S,L,G,P,M,b)=>{c[g++]=d(w,S,L,G,P,M,b)})}else c=[],l.push((f,g,w,S,L,G,P)=>{c.push(d(f,g,w,S,L,G,P))});return this[a].apply(this,l),c};const o="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),d=l.pop(),c=[];return l.push((f,g,w,S,L,G,P)=>{d(f,g,w,S,L,G,P)&&c.push(f)}),this[a].apply(this,l),c};const u="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(){let l=Array.prototype.slice.call(arguments);if(l.length<2||l.length>4)throw new F(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${l.length}).`);if(typeof l[l.length-1]=="function"&&typeof l[l.length-2]!="function")throw new F(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,c;l.length===2?(d=l[0],c=l[1],l=[]):l.length===3?(d=l[1],c=l[2],l=[l[0]]):l.length===4&&(d=l[2],c=l[3],l=[l[0],l[1]]);let f=c;return l.push((g,w,S,L,G,P,M)=>{f=d(f,g,w,S,L,G,P,M)}),this[a].apply(this,l),f}}function Oa(r,i){const{name:t,type:e,direction:n}=i,a="find"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(u,l,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return!1;if(arguments.length===1)return d=u,En(!0,this,e,d);if(arguments.length===2){u=""+u,d=l;const c=this._nodes.get(u);if(typeof c>"u")throw new x(`Graph.${a}: could not find the "${u}" node in the graph.`);return Xt(!0,this.multi,e==="mixed"?this.type:e,n,c,d)}if(arguments.length===3){u=""+u,l=""+l;const c=this._nodes.get(u);if(!c)throw new x(`Graph.${a}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(l))throw new x(`Graph.${a}:  could not find the "${l}" target node in the graph.`);return Jt(!0,e,this.multi,n,c,l,d)}throw new F(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((c,f,g,w,S,L,G)=>l(c,f,g,w,S,L,G)),!!this[a].apply(this,u)};const o="every"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((c,f,g,w,S,L,G)=>!l(c,f,g,w,S,L,G)),!this[a].apply(this,u)}}function Ua(r,i){const{name:t,type:e,direction:n}=i,a=t.slice(0,-1)+"Entries";r.prototype[a]=function(s,o){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return $e();if(!arguments.length)return ka(this,e);if(arguments.length===1){s=""+s;const u=this._nodes.get(s);if(!u)throw new x(`Graph.${a}: could not find the "${s}" node in the graph.`);return xa(e,n,u)}if(arguments.length===2){s=""+s,o=""+o;const u=this._nodes.get(s);if(!u)throw new x(`Graph.${a}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new x(`Graph.${a}:  could not find the "${o}" target node in the graph.`);return Ia(e,n,u,o)}throw new F(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function za(r){Ta.forEach(i=>{Na(r,i),Ba(r,i),Oa(r,i),Ua(r,i)})}const $a=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function yt(){this.A=null,this.B=null}yt.prototype.wrap=function(r){this.A===null?this.A=r:this.B===null&&(this.B=r)};yt.prototype.has=function(r){return this.A!==null&&r in this.A||this.B!==null&&r in this.B};function Ye(r,i,t,e,n){for(const a in e){const s=e[a],o=s.source,u=s.target,l=o===t?u:o;if(i&&i.has(l.key))continue;const d=n(l.key,l.attributes);if(r&&d)return l.key}}function Qt(r,i,t,e,n){if(i!=="mixed"){if(i==="undirected")return Ye(r,null,e,e.undirected,n);if(typeof t=="string")return Ye(r,null,e,e[t],n)}const a=new yt;let s;if(i!=="undirected"){if(t!=="out"){if(s=Ye(r,null,e,e.in,n),r&&s)return s;a.wrap(e.in)}if(t!=="in"){if(s=Ye(r,a,e,e.out,n),r&&s)return s;a.wrap(e.out)}}if(i!=="directed"&&(s=Ye(r,a,e,e.undirected,n),r&&s))return s}function Ha(r,i,t){if(r!=="mixed"){if(r==="undirected")return Object.keys(t.undirected);if(typeof i=="string")return Object.keys(t[i])}const e=[];return Qt(!1,r,i,t,function(n){e.push(n)}),e}function Xe(r,i,t){const e=Object.keys(t),n=e.length;let a=0;return{[Symbol.iterator](){return this},next(){let s=null;do{if(a>=n)return r&&r.wrap(t),{done:!0};const o=t[e[a++]],u=o.source,l=o.target;if(s=u===i?l:u,r&&r.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}}}}function ja(r,i,t){if(r!=="mixed"){if(r==="undirected")return Xe(null,t,t.undirected);if(typeof i=="string")return Xe(null,t,t[i])}let e=$e();const n=new yt;return r!=="undirected"&&(i!=="out"&&(e=Le(e,Xe(n,t,t.in))),i!=="in"&&(e=Le(e,Xe(n,t,t.out)))),r!=="directed"&&(e=Le(e,Xe(n,t,t.undirected))),e}function Wa(r,i){const{name:t,type:e,direction:n}=i;r.prototype[t]=function(a){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return[];a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new x(`Graph.${t}: could not find the "${a}" node in the graph.`);return Ha(e==="mixed"?this.type:e,n,s)}}function qa(r,i){const{name:t,type:e,direction:n}=i,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(l,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return;l=""+l;const c=this._nodes.get(l);if(typeof c>"u")throw new x(`Graph.${a}: could not find the "${l}" node in the graph.`);Qt(!1,e==="mixed"?this.type:e,n,c,d)};const s="map"+t[0].toUpperCase()+t.slice(1);r.prototype[s]=function(l,d){const c=[];return this[a](l,(f,g)=>{c.push(d(f,g))}),c};const o="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[o]=function(l,d){const c=[];return this[a](l,(f,g)=>{d(f,g)&&c.push(f)}),c};const u="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(l,d,c){if(arguments.length<3)throw new F(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=c;return this[a](l,(g,w)=>{f=d(f,g,w)}),f}}function Va(r,i){const{name:t,type:e,direction:n}=i,a=t[0].toUpperCase()+t.slice(1,-1),s="find"+a;r.prototype[s]=function(l,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return;l=""+l;const c=this._nodes.get(l);if(typeof c>"u")throw new x(`Graph.${s}: could not find the "${l}" node in the graph.`);return Qt(!0,e==="mixed"?this.type:e,n,c,d)};const o="some"+a;r.prototype[o]=function(l,d){return!!this[s](l,d)};const u="every"+a;r.prototype[u]=function(l,d){return!this[s](l,(f,g)=>!d(f,g))}}function Ka(r,i){const{name:t,type:e,direction:n}=i,a=t.slice(0,-1)+"Entries";r.prototype[a]=function(s){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return $e();s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new x(`Graph.${a}: could not find the "${s}" node in the graph.`);return ja(e==="mixed"?this.type:e,n,o)}}function Za(r){$a.forEach(i=>{Wa(r,i),qa(r,i),Va(r,i),Ka(r,i)})}function ct(r,i,t,e,n){const a=e._nodes.values(),s=e.type;let o,u,l,d,c,f;for(;o=a.next(),o.done!==!0;){let g=!1;if(u=o.value,s!=="undirected"){d=u.out;for(l in d){c=d[l];do f=c.target,g=!0,n(u.key,f.key,u.attributes,f.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}if(s!=="directed"){d=u.undirected;for(l in d)if(!(i&&u.key>l)){c=d[l];do f=c.target,f.key!==l&&(f=c.source),g=!0,n(u.key,f.key,u.attributes,f.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}t&&!g&&n(u.key,null,u.attributes,null,null,null,null)}}function Ya(r,i){const t={key:r};return fn(i.attributes)||(t.attributes=ee({},i.attributes)),t}function Xa(r,i,t){const e={key:i,source:t.source.key,target:t.target.key};return fn(t.attributes)||(e.attributes=ee({},t.attributes)),r==="mixed"&&t.undirected&&(e.undirected=!0),e}function Ja(r){if(!ie(r))throw new F('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in r))throw new F("Graph.import: serialized node is missing its key.");if("attributes"in r&&(!ie(r.attributes)||r.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Qa(r){if(!ie(r))throw new F('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in r))throw new F("Graph.import: serialized edge is missing its source.");if(!("target"in r))throw new F("Graph.import: serialized edge is missing its target.");if("attributes"in r&&(!ie(r.attributes)||r.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in r&&typeof r.undirected!="boolean")throw new F("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const es=ia(),ts=new Set(["directed","undirected","mixed"]),Ci=new Set(["domain","_events","_eventsCount","_maxListeners"]),is=[{name:r=>`${r}Edge`,generateKey:!0},{name:r=>`${r}DirectedEdge`,generateKey:!0,type:"directed"},{name:r=>`${r}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:r=>`${r}EdgeWithKey`},{name:r=>`${r}DirectedEdgeWithKey`,type:"directed"},{name:r=>`${r}UndirectedEdgeWithKey`,type:"undirected"}],ns={allowSelfLoops:!0,multi:!1,type:"mixed"};function rs(r,i,t){if(t&&!ie(t))throw new F(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(i=""+i,t=t||{},r._nodes.has(i))throw new z(`Graph.addNode: the "${i}" node already exist in the graph.`);const e=new r.NodeDataClass(i,t);return r._nodes.set(i,e),r.emit("nodeAdded",{key:i,attributes:t}),e}function Ai(r,i,t){const e=new r.NodeDataClass(i,t);return r._nodes.set(i,e),r.emit("nodeAdded",{key:i,attributes:t}),e}function wn(r,i,t,e,n,a,s,o){if(!e&&r.type==="undirected")throw new z(`Graph.${i}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(e&&r.type==="directed")throw new z(`Graph.${i}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(o&&!ie(o))throw new F(`Graph.${i}: invalid attributes. Expecting an object but got "${o}"`);if(a=""+a,s=""+s,o=o||{},!r.allowSelfLoops&&a===s)throw new z(`Graph.${i}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=r._nodes.get(a),l=r._nodes.get(s);if(!u)throw new x(`Graph.${i}: source node "${a}" not found.`);if(!l)throw new x(`Graph.${i}: target node "${s}" not found.`);const d={key:null,undirected:e,source:a,target:s,attributes:o};if(t)n=r._edgeKeyGenerator();else if(n=""+n,r._edges.has(n))throw new z(`Graph.${i}: the "${n}" edge already exists in the graph.`);if(!r.multi&&(e?typeof u.undirected[s]<"u":typeof u.out[s]<"u"))throw new z(`Graph.${i}: an edge linking "${a}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const c=new He(e,n,u,l,o);r._edges.set(n,c);const f=a===s;return e?(u.undirectedDegree++,l.undirectedDegree++,f&&(u.undirectedLoops++,r._undirectedSelfLoopCount++)):(u.outDegree++,l.inDegree++,f&&(u.directedLoops++,r._directedSelfLoopCount++)),r.multi?c.attachMulti():c.attach(),e?r._undirectedSize++:r._directedSize++,d.key=n,r.emit("edgeAdded",d),n}function as(r,i,t,e,n,a,s,o,u){if(!e&&r.type==="undirected")throw new z(`Graph.${i}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(e&&r.type==="directed")throw new z(`Graph.${i}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(o){if(u){if(typeof o!="function")throw new F(`Graph.${i}: invalid updater function. Expecting a function but got "${o}"`)}else if(!ie(o))throw new F(`Graph.${i}: invalid attributes. Expecting an object but got "${o}"`)}a=""+a,s=""+s;let l;if(u&&(l=o,o=void 0),!r.allowSelfLoops&&a===s)throw new z(`Graph.${i}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=r._nodes.get(a),c=r._nodes.get(s),f,g;if(!t&&(f=r._edges.get(n),f)){if((f.source.key!==a||f.target.key!==s)&&(!e||f.source.key!==s||f.target.key!==a))throw new z(`Graph.${i}: inconsistency detected when attempting to merge the "${n}" edge with "${a}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);g=f}if(!g&&!r.multi&&d&&(g=e?d.undirected[s]:d.out[s]),g){const P=[g.key,!1,!1,!1];if(u?!l:!o)return P;if(u){const M=g.attributes;g.attributes=l(M),r.emit("edgeAttributesUpdated",{type:"replace",key:g.key,attributes:g.attributes})}else ee(g.attributes,o),r.emit("edgeAttributesUpdated",{type:"merge",key:g.key,attributes:g.attributes,data:o});return P}o=o||{},u&&l&&(o=l(o));const w={key:null,undirected:e,source:a,target:s,attributes:o};if(t)n=r._edgeKeyGenerator();else if(n=""+n,r._edges.has(n))throw new z(`Graph.${i}: the "${n}" edge already exists in the graph.`);let S=!1,L=!1;d||(d=Ai(r,a,{}),S=!0,a===s&&(c=d,L=!0)),c||(c=Ai(r,s,{}),L=!0),f=new He(e,n,d,c,o),r._edges.set(n,f);const G=a===s;return e?(d.undirectedDegree++,c.undirectedDegree++,G&&(d.undirectedLoops++,r._undirectedSelfLoopCount++)):(d.outDegree++,c.inDegree++,G&&(d.directedLoops++,r._directedSelfLoopCount++)),r.multi?f.attachMulti():f.attach(),e?r._undirectedSize++:r._directedSize++,w.key=n,r.emit("edgeAdded",w),[n,!0,S,L]}function Ie(r,i){r._edges.delete(i.key);const{source:t,target:e,attributes:n}=i,a=i.undirected,s=t===e;a?(t.undirectedDegree--,e.undirectedDegree--,s&&(t.undirectedLoops--,r._undirectedSelfLoopCount--)):(t.outDegree--,e.inDegree--,s&&(t.directedLoops--,r._directedSelfLoopCount--)),r.multi?i.detachMulti():i.detach(),a?r._undirectedSize--:r._directedSize--,r.emit("edgeDropped",{key:i.key,attributes:n,source:t.key,target:e.key,undirected:a})}class Y extends dn.EventEmitter{constructor(i){if(super(),i=ee({},ns,i),typeof i.multi!="boolean")throw new F(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${i.multi}".`);if(!ts.has(i.type))throw new F(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${i.type}".`);if(typeof i.allowSelfLoops!="boolean")throw new F(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${i.allowSelfLoops}".`);const t=i.type==="mixed"?yn:i.type==="directed"?gn:pn;le(this,"NodeDataClass",t);const e="geid_"+es()+"_";let n=0;const a=()=>{let s;do s=e+n++;while(this._edges.has(s));return s};le(this,"_attributes",{}),le(this,"_nodes",new Map),le(this,"_edges",new Map),le(this,"_directedSize",0),le(this,"_undirectedSize",0),le(this,"_directedSelfLoopCount",0),le(this,"_undirectedSelfLoopCount",0),le(this,"_edgeKeyGenerator",a),le(this,"_options",i),Ci.forEach(s=>le(this,s,this[s])),ge(this,"order",()=>this._nodes.size),ge(this,"size",()=>this._edges.size),ge(this,"directedSize",()=>this._directedSize),ge(this,"undirectedSize",()=>this._undirectedSize),ge(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ge(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ge(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ge(this,"multi",this._options.multi),ge(this,"type",this._options.type),ge(this,"allowSelfLoops",this._options.allowSelfLoops),ge(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(i){return this._nodes.has(""+i)}hasDirectedEdge(i,t){if(this.type==="undirected")return!1;if(arguments.length===1){const e=""+i,n=this._edges.get(e);return!!n&&!n.undirected}else if(arguments.length===2){i=""+i,t=""+t;const e=this._nodes.get(i);return e?e.out.hasOwnProperty(t):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(i,t){if(this.type==="directed")return!1;if(arguments.length===1){const e=""+i,n=this._edges.get(e);return!!n&&n.undirected}else if(arguments.length===2){i=""+i,t=""+t;const e=this._nodes.get(i);return e?e.undirected.hasOwnProperty(t):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(i,t){if(arguments.length===1){const e=""+i;return this._edges.has(e)}else if(arguments.length===2){i=""+i,t=""+t;const e=this._nodes.get(i);return e?typeof e.out<"u"&&e.out.hasOwnProperty(t)||typeof e.undirected<"u"&&e.undirected.hasOwnProperty(t):!1}throw new F(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(i,t){if(this.type==="undirected")return;if(i=""+i,t=""+t,this.multi)throw new z("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const e=this._nodes.get(i);if(!e)throw new x(`Graph.directedEdge: could not find the "${i}" source node in the graph.`);if(!this._nodes.has(t))throw new x(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const n=e.out&&e.out[t]||void 0;if(n)return n.key}undirectedEdge(i,t){if(this.type==="directed")return;if(i=""+i,t=""+t,this.multi)throw new z("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const e=this._nodes.get(i);if(!e)throw new x(`Graph.undirectedEdge: could not find the "${i}" source node in the graph.`);if(!this._nodes.has(t))throw new x(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const n=e.undirected&&e.undirected[t]||void 0;if(n)return n.key}edge(i,t){if(this.multi)throw new z("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.edge: could not find the "${i}" source node in the graph.`);if(!this._nodes.has(t))throw new x(`Graph.edge: could not find the "${t}" target node in the graph.`);const n=e.out&&e.out[t]||e.undirected&&e.undirected[t]||void 0;if(n)return n.key}areDirectedNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areDirectedNeighbors: could not find the "${i}" node in the graph.`);return this.type==="undirected"?!1:t in e.in||t in e.out}areOutNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areOutNeighbors: could not find the "${i}" node in the graph.`);return this.type==="undirected"?!1:t in e.out}areInNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areInNeighbors: could not find the "${i}" node in the graph.`);return this.type==="undirected"?!1:t in e.in}areUndirectedNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areUndirectedNeighbors: could not find the "${i}" node in the graph.`);return this.type==="directed"?!1:t in e.undirected}areNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areNeighbors: could not find the "${i}" node in the graph.`);return this.type!=="undirected"&&(t in e.in||t in e.out)||this.type!=="directed"&&t in e.undirected}areInboundNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areInboundNeighbors: could not find the "${i}" node in the graph.`);return this.type!=="undirected"&&t in e.in||this.type!=="directed"&&t in e.undirected}areOutboundNeighbors(i,t){i=""+i,t=""+t;const e=this._nodes.get(i);if(!e)throw new x(`Graph.areOutboundNeighbors: could not find the "${i}" node in the graph.`);return this.type!=="undirected"&&t in e.out||this.type!=="directed"&&t in e.undirected}inDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.inDegree: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.outDegree: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.directedDegree: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.undirectedDegree: could not find the "${i}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.inboundDegree: could not find the "${i}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.inDegree),e}outboundDegree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.outboundDegree: could not find the "${i}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.outDegree),e}degree(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.degree: could not find the "${i}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.inDegree+t.outDegree),e}inDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.inDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.outDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.directedDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.inDegree,n+=t.directedLoops),e-n}outboundDegreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.outDegree,n+=t.directedLoops),e-n}degreeWithoutSelfLoops(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.degreeWithoutSelfLoops: could not find the "${i}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.inDegree+t.outDegree,n+=t.directedLoops*2),e-n}source(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.source: could not find the "${i}" edge in the graph.`);return t.source.key}target(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.target: could not find the "${i}" edge in the graph.`);return t.target.key}extremities(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.extremities: could not find the "${i}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(i,t){i=""+i,t=""+t;const e=this._edges.get(t);if(!e)throw new x(`Graph.opposite: could not find the "${t}" edge in the graph.`);const n=e.source.key,a=e.target.key;if(i===n)return a;if(i===a)return n;throw new x(`Graph.opposite: the "${i}" node is not attached to the "${t}" edge (${n}, ${a}).`)}hasExtremity(i,t){i=""+i,t=""+t;const e=this._edges.get(i);if(!e)throw new x(`Graph.hasExtremity: could not find the "${i}" edge in the graph.`);return e.source.key===t||e.target.key===t}isUndirected(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.isUndirected: could not find the "${i}" edge in the graph.`);return t.undirected}isDirected(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.isDirected: could not find the "${i}" edge in the graph.`);return!t.undirected}isSelfLoop(i){i=""+i;const t=this._edges.get(i);if(!t)throw new x(`Graph.isSelfLoop: could not find the "${i}" edge in the graph.`);return t.source===t.target}addNode(i,t){return rs(this,i,t).key}mergeNode(i,t){if(t&&!ie(t))throw new F(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);i=""+i,t=t||{};let e=this._nodes.get(i);return e?(t&&(ee(e.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:i,attributes:e.attributes,data:t})),[i,!1]):(e=new this.NodeDataClass(i,t),this._nodes.set(i,e),this.emit("nodeAdded",{key:i,attributes:t}),[i,!0])}updateNode(i,t){if(t&&typeof t!="function")throw new F(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);i=""+i;let e=this._nodes.get(i);if(e){if(t){const a=e.attributes;e.attributes=t(a),this.emit("nodeAttributesUpdated",{type:"replace",key:i,attributes:e.attributes})}return[i,!1]}const n=t?t({}):{};return e=new this.NodeDataClass(i,n),this._nodes.set(i,e),this.emit("nodeAdded",{key:i,attributes:n}),[i,!0]}dropNode(i){i=""+i;const t=this._nodes.get(i);if(!t)throw new x(`Graph.dropNode: could not find the "${i}" node in the graph.`);let e;if(this.type!=="undirected"){for(const n in t.out){e=t.out[n];do Ie(this,e),e=e.next;while(e)}for(const n in t.in){e=t.in[n];do Ie(this,e),e=e.next;while(e)}}if(this.type!=="directed")for(const n in t.undirected){e=t.undirected[n];do Ie(this,e),e=e.next;while(e)}this._nodes.delete(i),this.emit("nodeDropped",{key:i,attributes:t.attributes})}dropEdge(i){let t;if(arguments.length>1){const e=""+arguments[0],n=""+arguments[1];if(t=de(this,e,n,this.type),!t)throw new x(`Graph.dropEdge: could not find the "${e}" -> "${n}" edge in the graph.`)}else if(i=""+i,t=this._edges.get(i),!t)throw new x(`Graph.dropEdge: could not find the "${i}" edge in the graph.`);return Ie(this,t),this}dropDirectedEdge(i,t){if(arguments.length<2)throw new z("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new z("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");i=""+i,t=""+t;const e=de(this,i,t,"directed");if(!e)throw new x(`Graph.dropDirectedEdge: could not find a "${i}" -> "${t}" edge in the graph.`);return Ie(this,e),this}dropUndirectedEdge(i,t){if(arguments.length<2)throw new z("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new z("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const e=de(this,i,t,"undirected");if(!e)throw new x(`Graph.dropUndirectedEdge: could not find a "${i}" -> "${t}" edge in the graph.`);return Ie(this,e),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const i=this._nodes.values();let t;for(;t=i.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(i){return this._attributes[i]}getAttributes(){return this._attributes}hasAttribute(i){return this._attributes.hasOwnProperty(i)}setAttribute(i,t){return this._attributes[i]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:i}),this}updateAttribute(i,t){if(typeof t!="function")throw new F("Graph.updateAttribute: updater should be a function.");const e=this._attributes[i];return this._attributes[i]=t(e),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:i}),this}removeAttribute(i){return delete this._attributes[i],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:i}),this}replaceAttributes(i){if(!ie(i))throw new F("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=i,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(i){if(!ie(i))throw new F("Graph.mergeAttributes: provided attributes are not a plain object.");return ee(this._attributes,i),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:i}),this}updateAttributes(i){if(typeof i!="function")throw new F("Graph.updateAttributes: provided updater is not a function.");return this._attributes=i(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(i,t){if(typeof i!="function")throw new F("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!_i(t))throw new F("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const e=this._nodes.values();let n,a;for(;n=e.next(),n.done!==!0;)a=n.value,a.attributes=i(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(i,t){if(typeof i!="function")throw new F("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!_i(t))throw new F("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const e=this._edges.values();let n,a,s,o;for(;n=e.next(),n.done!==!0;)a=n.value,s=a.source,o=a.target,a.attributes=i(a.key,a.attributes,s.key,o.key,s.attributes,o.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(i){if(typeof i!="function")throw new F("Graph.forEachAdjacencyEntry: expecting a callback.");ct(!1,!1,!1,this,i)}forEachAdjacencyEntryWithOrphans(i){if(typeof i!="function")throw new F("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ct(!1,!1,!0,this,i)}forEachAssymetricAdjacencyEntry(i){if(typeof i!="function")throw new F("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ct(!1,!0,!1,this,i)}forEachAssymetricAdjacencyEntryWithOrphans(i){if(typeof i!="function")throw new F("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ct(!1,!0,!0,this,i)}nodes(){return Array.from(this._nodes.keys())}forEachNode(i){if(typeof i!="function")throw new F("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)n=e.value,i(n.key,n.attributes)}findNode(i){if(typeof i!="function")throw new F("Graph.findNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,i(n.key,n.attributes))return n.key}mapNodes(i){if(typeof i!="function")throw new F("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let e,n;const a=new Array(this.order);let s=0;for(;e=t.next(),e.done!==!0;)n=e.value,a[s++]=i(n.key,n.attributes);return a}someNode(i){if(typeof i!="function")throw new F("Graph.someNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,i(n.key,n.attributes))return!0;return!1}everyNode(i){if(typeof i!="function")throw new F("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,!i(n.key,n.attributes))return!1;return!0}filterNodes(i){if(typeof i!="function")throw new F("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let e,n;const a=[];for(;e=t.next(),e.done!==!0;)n=e.value,i(n.key,n.attributes)&&a.push(n.key);return a}reduceNodes(i,t){if(typeof i!="function")throw new F("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new F("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let e=t;const n=this._nodes.values();let a,s;for(;a=n.next(),a.done!==!0;)s=a.value,e=i(e,s.key,s.attributes);return e}nodeEntries(){const i=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=i.next();if(t.done)return t;const e=t.value;return{value:{node:e.key,attributes:e.attributes},done:!1}}}}export(){const i=new Array(this._nodes.size);let t=0;this._nodes.forEach((n,a)=>{i[t++]=Ya(a,n)});const e=new Array(this._edges.size);return t=0,this._edges.forEach((n,a)=>{e[t++]=Xa(this.type,a,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:i,edges:e}}import(i,t=!1){if(i instanceof Y)return i.forEachNode((u,l)=>{t?this.mergeNode(u,l):this.addNode(u,l)}),i.forEachEdge((u,l,d,c,f,g,w)=>{t?w?this.mergeUndirectedEdgeWithKey(u,d,c,l):this.mergeDirectedEdgeWithKey(u,d,c,l):w?this.addUndirectedEdgeWithKey(u,d,c,l):this.addDirectedEdgeWithKey(u,d,c,l)}),this;if(!ie(i))throw new F("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(i.attributes){if(!ie(i.attributes))throw new F("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(i.attributes):this.replaceAttributes(i.attributes)}let e,n,a,s,o;if(i.nodes){if(a=i.nodes,!Array.isArray(a))throw new F("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=a.length;e<n;e++){s=a[e],Ja(s);const{key:u,attributes:l}=s;t?this.mergeNode(u,l):this.addNode(u,l)}}if(i.edges){let u=!1;if(this.type==="undirected"&&(u=!0),a=i.edges,!Array.isArray(a))throw new F("Graph.import: invalid edges. Expecting an array.");for(e=0,n=a.length;e<n;e++){o=a[e],Qa(o);const{source:l,target:d,attributes:c,undirected:f=u}=o;let g;"key"in o?(g=t?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,g.call(this,o.key,l,d,c)):(g=t?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,g.call(this,l,d,c))}}return this}nullCopy(i){const t=new Y(ee({},this._options,i));return t.replaceAttributes(ee({},this.getAttributes())),t}emptyCopy(i){const t=this.nullCopy(i);return this._nodes.forEach((e,n)=>{const a=ee({},e.attributes);e=new t.NodeDataClass(n,a),t._nodes.set(n,e)}),t}copy(i){if(i=i||{},typeof i.type=="string"&&i.type!==this.type&&i.type!=="mixed")throw new z(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${i.type}" because this would mean losing information about the current graph.`);if(typeof i.multi=="boolean"&&i.multi!==this.multi&&i.multi!==!0)throw new z("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof i.allowSelfLoops=="boolean"&&i.allowSelfLoops!==this.allowSelfLoops&&i.allowSelfLoops!==!0)throw new z("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(i),e=this._edges.values();let n,a;for(;n=e.next(),n.done!==!0;)a=n.value,wn(t,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,ee({},a.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const i={};this._nodes.forEach((a,s)=>{i[s]=a.attributes});const t={},e={};this._edges.forEach((a,s)=>{const o=a.undirected?"--":"->";let u="",l=a.source.key,d=a.target.key,c;a.undirected&&l>d&&(c=l,l=d,d=c);const f=`(${l})${o}(${d})`;s.startsWith("geid_")?this.multi&&(typeof e[f]>"u"?e[f]=0:e[f]++,u+=`${e[f]}. `):u+=`[${s}]: `,u+=f,t[u]=a.attributes});const n={};for(const a in this)this.hasOwnProperty(a)&&!Ci.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(n[a]=this[a]);return n.attributes=this._attributes,n.nodes=i,n.edges=t,le(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(Y.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y.prototype.inspect);is.forEach(r=>{["add","merge","update"].forEach(i=>{const t=r.name(i),e=i==="add"?wn:as;r.generateKey?Y.prototype[t]=function(n,a,s){return e(this,t,!0,(r.type||this.type)==="undirected",null,n,a,s,i==="update")}:Y.prototype[t]=function(n,a,s,o){return e(this,t,!1,(r.type||this.type)==="undirected",n,a,s,o,i==="update")}})});ya(Y);Aa(Y);za(Y);Za(Y);class Sn extends Y{constructor(i){const t=ee({type:"directed"},i);if("multi"in t&&t.multi!==!1)throw new F("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new F('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class _n extends Y{constructor(i){const t=ee({type:"undirected"},i);if("multi"in t&&t.multi!==!1)throw new F("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new F('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Cn extends Y{constructor(i){const t=ee({multi:!0},i);if("multi"in t&&t.multi!==!0)throw new F("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class An extends Y{constructor(i){const t=ee({type:"directed",multi:!0},i);if("multi"in t&&t.multi!==!0)throw new F("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new F('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Tn extends Y{constructor(i){const t=ee({type:"undirected",multi:!0},i);if("multi"in t&&t.multi!==!0)throw new F("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new F('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function je(r){r.from=function(i,t){const e=ee({},i.options,t),n=new r(e);return n.import(i),n}}je(Y);je(Sn);je(_n);je(Cn);je(An);je(Tn);Y.Graph=Y;Y.DirectedGraph=Sn;Y.UndirectedGraph=_n;Y.MultiGraph=Cn;Y.MultiDirectedGraph=An;Y.MultiUndirectedGraph=Tn;Y.InvalidArgumentsGraphError=F;Y.NotFoundGraphError=x;Y.UsageGraphError=z;var Je={},Ti;function ss(){if(Ti)return Je;Ti=1;function r(e){return typeof e!="number"||isNaN(e)?1:e}function i(e,n){var a={},s=function(l){return typeof l>"u"?n:l};typeof n=="function"&&(s=n);var o=function(l){return s(l[e])},u=function(){return s(void 0)};return typeof e=="string"?(a.fromAttributes=o,a.fromGraph=function(l,d){return o(l.getNodeAttributes(d))},a.fromEntry=function(l,d){return o(d)}):typeof e=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},a.fromGraph=function(l,d){return s(e(d,l.getNodeAttributes(d)))},a.fromEntry=function(l,d){return s(e(l,d))}):(a.fromAttributes=u,a.fromGraph=u,a.fromEntry=u),a}function t(e,n){var a={},s=function(l){return typeof l>"u"?n:l};typeof n=="function"&&(s=n);var o=function(l){return s(l[e])},u=function(){return s(void 0)};return typeof e=="string"?(a.fromAttributes=o,a.fromGraph=function(l,d){return o(l.getEdgeAttributes(d))},a.fromEntry=function(l,d){return o(d)},a.fromPartialEntry=a.fromEntry,a.fromMinimalEntry=a.fromEntry):typeof e=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},a.fromGraph=function(l,d){var c=l.extremities(d);return s(e(d,l.getEdgeAttributes(d),c[0],c[1],l.getNodeAttributes(c[0]),l.getNodeAttributes(c[1]),l.isUndirected(d)))},a.fromEntry=function(l,d,c,f,g,w,S){return s(e(l,d,c,f,g,w,S))},a.fromPartialEntry=function(l,d,c,f){return s(e(l,d,c,f))},a.fromMinimalEntry=function(l,d){return s(e(l,d))}):(a.fromAttributes=u,a.fromGraph=u,a.fromEntry=u,a.fromMinimalEntry=u),a}return Je.createNodeValueGetter=i,Je.createEdgeValueGetter=t,Je.createEdgeWeightGetter=function(e){return t(e,r)},Je}var Lt,Li;function os(){if(Li)return Lt;Li=1;var r=0,i=1,t=2,e=3,n=4,a=5,s=6,o=7,u=8,l=9,d=0,c=1,f=2,g=0,w=1,S=2,L=3,G=4,P=5,M=6,b=7,_=8,D=3,h=10,E=3,p=9,v=10;return Lt=function(R,y,H){var j,A,m,U,$,Z,X,K,I,se,Q=y.length,Se=H.length,oe=R.adjustSizes,ue=R.barnesHutTheta*R.barnesHutTheta,ne,V,q,W,J,O,B,C=[];for(m=0;m<Q;m+=h)y[m+n]=y[m+t],y[m+a]=y[m+e],y[m+t]=0,y[m+e]=0;if(R.outboundAttractionDistribution){for(ne=0,m=0;m<Q;m+=h)ne+=y[m+s];ne/=Q/h}if(R.barnesHutOptimize){var be=1/0,fe=-1/0,Ee=1/0,we=-1/0,te,ye,_e;for(m=0;m<Q;m+=h)be=Math.min(be,y[m+r]),fe=Math.max(fe,y[m+r]),Ee=Math.min(Ee,y[m+i]),we=Math.max(we,y[m+i]);var Me=fe-be,tt=we-Ee;for(Me>tt?(Ee-=(Me-tt)/2,we=Ee+Me):(be-=(tt-Me)/2,fe=be+tt),C[0+g]=-1,C[0+w]=(be+fe)/2,C[0+S]=(Ee+we)/2,C[0+L]=Math.max(fe-be,we-Ee),C[0+G]=-1,C[0+P]=-1,C[0+M]=0,C[0+b]=0,C[0+_]=0,j=1,m=0;m<Q;m+=h)for(A=0,_e=D;;)if(C[A+P]>=0){y[m+r]<C[A+w]?y[m+i]<C[A+S]?te=C[A+P]:te=C[A+P]+p:y[m+i]<C[A+S]?te=C[A+P]+p*2:te=C[A+P]+p*3,C[A+b]=(C[A+b]*C[A+M]+y[m+r]*y[m+s])/(C[A+M]+y[m+s]),C[A+_]=(C[A+_]*C[A+M]+y[m+i]*y[m+s])/(C[A+M]+y[m+s]),C[A+M]+=y[m+s],A=te;continue}else if(C[A+g]<0){C[A+g]=m;break}else{if(C[A+P]=j*p,K=C[A+L]/2,I=C[A+P],C[I+g]=-1,C[I+w]=C[A+w]-K,C[I+S]=C[A+S]-K,C[I+L]=K,C[I+G]=I+p,C[I+P]=-1,C[I+M]=0,C[I+b]=0,C[I+_]=0,I+=p,C[I+g]=-1,C[I+w]=C[A+w]-K,C[I+S]=C[A+S]+K,C[I+L]=K,C[I+G]=I+p,C[I+P]=-1,C[I+M]=0,C[I+b]=0,C[I+_]=0,I+=p,C[I+g]=-1,C[I+w]=C[A+w]+K,C[I+S]=C[A+S]-K,C[I+L]=K,C[I+G]=I+p,C[I+P]=-1,C[I+M]=0,C[I+b]=0,C[I+_]=0,I+=p,C[I+g]=-1,C[I+w]=C[A+w]+K,C[I+S]=C[A+S]+K,C[I+L]=K,C[I+G]=C[A+G],C[I+P]=-1,C[I+M]=0,C[I+b]=0,C[I+_]=0,j+=4,y[C[A+g]+r]<C[A+w]?y[C[A+g]+i]<C[A+S]?te=C[A+P]:te=C[A+P]+p:y[C[A+g]+i]<C[A+S]?te=C[A+P]+p*2:te=C[A+P]+p*3,C[A+M]=y[C[A+g]+s],C[A+b]=y[C[A+g]+r],C[A+_]=y[C[A+g]+i],C[te+g]=C[A+g],C[A+g]=-1,y[m+r]<C[A+w]?y[m+i]<C[A+S]?ye=C[A+P]:ye=C[A+P]+p:y[m+i]<C[A+S]?ye=C[A+P]+p*2:ye=C[A+P]+p*3,te===ye)if(_e--){A=te;continue}else{_e=D;break}C[ye+g]=m;break}}if(R.barnesHutOptimize)for(V=R.scalingRatio,m=0;m<Q;m+=h)for(A=0;;)if(C[A+P]>=0)if(O=Math.pow(y[m+r]-C[A+b],2)+Math.pow(y[m+i]-C[A+_],2),se=C[A+L],4*se*se/O<ue){if(q=y[m+r]-C[A+b],W=y[m+i]-C[A+_],oe===!0?O>0?(B=V*y[m+s]*C[A+M]/O,y[m+t]+=q*B,y[m+e]+=W*B):O<0&&(B=-V*y[m+s]*C[A+M]/Math.sqrt(O),y[m+t]+=q*B,y[m+e]+=W*B):O>0&&(B=V*y[m+s]*C[A+M]/O,y[m+t]+=q*B,y[m+e]+=W*B),A=C[A+G],A<0)break;continue}else{A=C[A+P];continue}else{if(Z=C[A+g],Z>=0&&Z!==m&&(q=y[m+r]-y[Z+r],W=y[m+i]-y[Z+i],O=q*q+W*W,oe===!0?O>0?(B=V*y[m+s]*y[Z+s]/O,y[m+t]+=q*B,y[m+e]+=W*B):O<0&&(B=-V*y[m+s]*y[Z+s]/Math.sqrt(O),y[m+t]+=q*B,y[m+e]+=W*B):O>0&&(B=V*y[m+s]*y[Z+s]/O,y[m+t]+=q*B,y[m+e]+=W*B)),A=C[A+G],A<0)break;continue}else for(V=R.scalingRatio,U=0;U<Q;U+=h)for($=0;$<U;$+=h)q=y[U+r]-y[$+r],W=y[U+i]-y[$+i],oe===!0?(O=Math.sqrt(q*q+W*W)-y[U+u]-y[$+u],O>0?(B=V*y[U+s]*y[$+s]/O/O,y[U+t]+=q*B,y[U+e]+=W*B,y[$+t]-=q*B,y[$+e]-=W*B):O<0&&(B=100*V*y[U+s]*y[$+s],y[U+t]+=q*B,y[U+e]+=W*B,y[$+t]-=q*B,y[$+e]-=W*B)):(O=Math.sqrt(q*q+W*W),O>0&&(B=V*y[U+s]*y[$+s]/O/O,y[U+t]+=q*B,y[U+e]+=W*B,y[$+t]-=q*B,y[$+e]-=W*B));for(I=R.gravity/R.scalingRatio,V=R.scalingRatio,m=0;m<Q;m+=h)B=0,q=y[m+r],W=y[m+i],O=Math.sqrt(Math.pow(q,2)+Math.pow(W,2)),R.strongGravityMode?O>0&&(B=V*y[m+s]*I):O>0&&(B=V*y[m+s]*I/O),y[m+t]-=q*B,y[m+e]-=W*B;for(V=1*(R.outboundAttractionDistribution?ne:1),X=0;X<Se;X+=E)U=H[X+d],$=H[X+c],K=H[X+f],J=Math.pow(K,R.edgeWeightInfluence),q=y[U+r]-y[$+r],W=y[U+i]-y[$+i],oe===!0?(O=Math.sqrt(q*q+W*W)-y[U+u]-y[$+u],R.linLogMode?R.outboundAttractionDistribution?O>0&&(B=-V*J*Math.log(1+O)/O/y[U+s]):O>0&&(B=-V*J*Math.log(1+O)/O):R.outboundAttractionDistribution?O>0&&(B=-V*J/y[U+s]):O>0&&(B=-V*J)):(O=Math.sqrt(Math.pow(q,2)+Math.pow(W,2)),R.linLogMode?R.outboundAttractionDistribution?O>0&&(B=-V*J*Math.log(1+O)/O/y[U+s]):O>0&&(B=-V*J*Math.log(1+O)/O):R.outboundAttractionDistribution?(O=1,B=-V*J/y[U+s]):(O=1,B=-V*J)),O>0&&(y[U+t]+=q*B,y[U+e]+=W*B,y[$+t]-=q*B,y[$+e]-=W*B);var it,We,nt,De,rt,at;if(oe===!0)for(m=0;m<Q;m+=h)y[m+l]!==1&&(it=Math.sqrt(Math.pow(y[m+t],2)+Math.pow(y[m+e],2)),it>v&&(y[m+t]=y[m+t]*v/it,y[m+e]=y[m+e]*v/it),We=y[m+s]*Math.sqrt((y[m+n]-y[m+t])*(y[m+n]-y[m+t])+(y[m+a]-y[m+e])*(y[m+a]-y[m+e])),nt=Math.sqrt((y[m+n]+y[m+t])*(y[m+n]+y[m+t])+(y[m+a]+y[m+e])*(y[m+a]+y[m+e]))/2,De=.1*Math.log(1+nt)/(1+Math.sqrt(We)),rt=y[m+r]+y[m+t]*(De/R.slowDown),y[m+r]=rt,at=y[m+i]+y[m+e]*(De/R.slowDown),y[m+i]=at);else for(m=0;m<Q;m+=h)y[m+l]!==1&&(We=y[m+s]*Math.sqrt((y[m+n]-y[m+t])*(y[m+n]-y[m+t])+(y[m+a]-y[m+e])*(y[m+a]-y[m+e])),nt=Math.sqrt((y[m+n]+y[m+t])*(y[m+n]+y[m+t])+(y[m+a]+y[m+e])*(y[m+a]+y[m+e]))/2,De=y[m+o]*Math.log(1+nt)/(1+Math.sqrt(We)),y[m+o]=Math.min(1,Math.sqrt(De*(Math.pow(y[m+t],2)+Math.pow(y[m+e],2))/(1+Math.sqrt(We)))),rt=y[m+r]+y[m+t]*(De/R.slowDown),y[m+r]=rt,at=y[m+i]+y[m+e]*(De/R.slowDown),y[m+i]=at);return{}},Lt}var Ce={},Ri;function us(){if(Ri)return Ce;Ri=1;var r=10,i=3;return Ce.assign=function(t){t=t||{};var e=Array.prototype.slice.call(arguments).slice(1),n,a,s;for(n=0,s=e.length;n<s;n++)if(e[n])for(a in e[n])t[a]=e[n][a];return t},Ce.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Ce.graphToByteArrays=function(t,e){var n=t.order,a=t.size,s={},o,u=new Float32Array(n*r),l=new Float32Array(a*i);return o=0,t.forEachNode(function(d,c){s[d]=o,u[o]=c.x,u[o+1]=c.y,u[o+2]=0,u[o+3]=0,u[o+4]=0,u[o+5]=0,u[o+6]=1,u[o+7]=1,u[o+8]=c.size||1,u[o+9]=c.fixed?1:0,o+=r}),o=0,t.forEachEdge(function(d,c,f,g,w,S,L){var G=s[f],P=s[g],M=e(d,c,f,g,w,S,L);u[G+6]+=M,u[P+6]+=M,l[o]=G,l[o+1]=P,l[o+2]=M,o+=i}),{nodes:u,edges:l}},Ce.assignLayoutChanges=function(t,e,n){var a=0;t.updateEachNodeAttributes(function(s,o){return o.x=e[a],o.y=e[a+1],a+=r,n?n(s,o):o})},Ce.readGraphPositions=function(t,e){var n=0;t.forEachNode(function(a,s){e[n]=s.x,e[n+1]=s.y,n+=r})},Ce.collectLayoutChanges=function(t,e,n){for(var a=t.nodes(),s={},o=0,u=0,l=e.length;o<l;o+=r){if(n){var d=Object.assign({},t.getNodeAttributes(a[u]));d.x=e[o],d.y=e[o+1],d=n(a[u],d),s[a[u]]={x:d.x,y:d.y}}else s[a[u]]={x:e[o],y:e[o+1]};u++}return s},Ce.createWorker=function(e){var n=window.URL||window.webkitURL,a=e.toString(),s=n.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),o=new Worker(s);return n.revokeObjectURL(s),o},Ce}var Rt,Pi;function ls(){return Pi||(Pi=1,Rt={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Rt}var Pt,Mi;function ds(){if(Mi)return Pt;Mi=1;var r=Fe(),i=ss().createEdgeWeightGetter,t=os(),e=us(),n=ls();function a(u,l,d){if(!r(l))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof d=="number"&&(d={iterations:d});var c=d.iterations;if(typeof c!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(c<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var f=i("getEdgeWeight"in d?d.getEdgeWeight:"weight").fromEntry,g=typeof d.outputReducer=="function"?d.outputReducer:null,w=e.assign({},n,d.settings),S=e.validateSettings(w);if(S)throw new Error("graphology-layout-forceatlas2: "+S.message);var L=e.graphToByteArrays(l,f),G;for(G=0;G<c;G++)t(w,L.nodes,L.edges);if(u){e.assignLayoutChanges(l,L.nodes,g);return}return e.collectLayoutChanges(l,L.nodes)}function s(u){var l=typeof u=="number"?u:u.order;return{barnesHutOptimize:l>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(l)}}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),o.inferSettings=s,Pt=o,Pt}var cs=ds();const hs=Vt(cs);var Ne={},Mt,Di;function gt(){if(Di)return Mt;Di=1;function r(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function i(t,e){t=t||{};var n={};for(var a in e){var s=t[a],o=e[a];if(!r(o)){n[a]=i(s,o);continue}s===void 0?n[a]=o:n[a]=s}return n}return Mt=i,Mt}var Dt,ki;function fs(){if(ki)return Dt;ki=1;function r(t){return function(e,n){return e+Math.floor(t()*(n-e+1))}}var i=r(Math.random);return i.createRandom=r,Dt=i,Dt}var kt,Gi;function ys(){if(Gi)return kt;Gi=1;var r=fs().createRandom;function i(e){var n=r(e);return function(a){for(var s=a.length,o=s-1,u=-1;++u<s;){var l=n(u,o),d=a[l];a[l]=a[u],a[u]=d}}}var t=i(Math.random);return t.createShuffleInPlace=i,kt=t,kt}var Gt,xi;function gs(){if(xi)return Gt;xi=1;var r=gt(),i=Fe(),t=ys(),e={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function n(h,E,p,v,T){this.wrappedCircle=T||null,this.children={},this.countChildren=0,this.id=h||null,this.next=null,this.previous=null,this.x=E||null,this.y=p||null,T?this.r=1010101:this.r=v||999}n.prototype.hasChildren=function(){return this.countChildren>0},n.prototype.addChild=function(h,E){this.children[h]=E,++this.countChildren},n.prototype.getChild=function(h){if(!this.children.hasOwnProperty(h)){var E=new n;this.children[h]=E,++this.countChildren}return this.children[h]},n.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var h=this;for(var E in h.children){var p=h.children[E];p.x+=h.x,p.y+=h.y,p.applyPositionToChildren()}}};function a(h,E,p){for(var v in E.children){var T=E.children[v];T.hasChildren()?a(h,T,p):p[T.id]={x:T.x,y:T.y}}}function s(h,E){var p=h.r-E.r,v=E.x-h.x,T=E.y-h.y;return p<0||p*p<v*v+T*T}function o(h,E){var p=h.r-E.r+1e-6,v=E.x-h.x,T=E.y-h.y;return p>0&&p*p>v*v+T*T}function u(h,E){for(var p=0;p<E.length;++p)if(!o(h,E[p]))return!1;return!0}function l(h){return new n(null,h.x,h.y,h.r)}function d(h,E){var p=h.x,v=h.y,T=h.r,R=E.x,y=E.y,H=E.r,j=R-p,A=y-v,m=H-T,U=Math.sqrt(j*j+A*A);return new n(null,(p+R+j/U*m)/2,(v+y+A/U*m)/2,(U+T+H)/2)}function c(h,E,p){var v=h.x,T=h.y,R=h.r,y=E.x,H=E.y,j=E.r,A=p.x,m=p.y,U=p.r,$=v-y,Z=v-A,X=T-H,K=T-m,I=j-R,se=U-R,Q=v*v+T*T-R*R,Se=Q-y*y-H*H+j*j,oe=Q-A*A-m*m+U*U,ue=Z*X-$*K,ne=(X*oe-K*Se)/(ue*2)-v,V=(K*I-X*se)/ue,q=(Z*Se-$*oe)/(ue*2)-T,W=($*se-Z*I)/ue,J=V*V+W*W-1,O=2*(R+ne*V+q*W),B=ne*ne+q*q-R*R,C=-(J?(O+Math.sqrt(O*O-4*J*B))/(2*J):B/O);return new n(null,v+ne+V*C,T+q+W*C,C)}function f(h){switch(h.length){case 1:return l(h[0]);case 2:return d(h[0],h[1]);case 3:return c(h[0],h[1],h[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+h.length)}}function g(h,E){var p,v;if(u(E,h))return[E];for(p=0;p<h.length;++p)if(s(E,h[p])&&u(d(h[p],E),h))return[h[p],E];for(p=0;p<h.length-1;++p)for(v=p+1;v<h.length;++v)if(s(d(h[p],h[v]),E)&&s(d(h[p],E),h[v])&&s(d(h[v],E),h[p])&&u(c(h[p],h[v],E),h))return[h[p],h[v],E];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function w(h){var E=h.wrappedCircle,p=h.next.wrappedCircle,v=E.r+p.r,T=(E.x*p.r+p.x*E.r)/v,R=(E.y*p.r+p.y*E.r)/v;return T*T+R*R}function S(h,E){var p=0,v=h.slice(),T=h.length,R=[],y,H;for(E(v);p<T;)y=v[p],H&&o(H,y)?++p:(R=g(R,y),H=f(R),p=0);return H}function L(h,E,p){var v=h.x-E.x,T,R,y=h.y-E.y,H,j,A=v*v+y*y;A?(R=E.r+p.r,R*=R,j=h.r+p.r,j*=j,R>j?(T=(A+j-R)/(2*A),H=Math.sqrt(Math.max(0,j/A-T*T)),p.x=h.x-T*v-H*y,p.y=h.y-T*y+H*v):(T=(A+R-j)/(2*A),H=Math.sqrt(Math.max(0,R/A-T*T)),p.x=E.x+T*v-H*y,p.y=E.y+T*y+H*v)):(p.x=E.x+p.r,p.y=E.y)}function G(h,E){var p=h.r+E.r-1e-6,v=E.x-h.x,T=E.y-h.y;return p>0&&p*p>v*v+T*T}function P(h,E){var p=h.length;if(p===0)return 0;var v,T,R,y,H,j,A,m,U,$;if(v=h[0],v.x=0,v.y=0,p<=1)return v.r;if(T=h[1],v.x=-T.r,T.x=v.r,T.y=0,p<=2)return v.r+T.r;R=h[2],L(T,v,R),v=new n(null,null,null,null,v),T=new n(null,null,null,null,T),R=new n(null,null,null,null,R),v.next=R.previous=T,T.next=v.previous=R,R.next=T.previous=v;e:for(j=3;j<p;++j){R=h[j],L(v.wrappedCircle,T.wrappedCircle,R),R=new n(null,null,null,null,R),A=T.next,m=v.previous,U=T.wrappedCircle.r,$=v.wrappedCircle.r;do if(U<=$){if(G(A.wrappedCircle,R.wrappedCircle)){T=A,v.next=T,T.previous=v,--j;continue e}U+=A.wrappedCircle.r,A=A.next}else{if(G(m.wrappedCircle,R.wrappedCircle)){v=m,v.next=T,T.previous=v,--j;continue e}$+=m.wrappedCircle.r,m=m.previous}while(A!==m.next);for(R.previous=v,R.next=T,v.next=T.previous=T=R,y=w(v);(R=R.next)!==T;)(H=w(R))<y&&(v=R,y=H);T=v.next}v=[T.wrappedCircle],R=T;for(var Z=1e4;(R=R.next)!==T&&--Z!==0;)v.push(R.wrappedCircle);for(R=S(v,E),j=0;j<p;++j)v=h[j],v.x-=R.x,v.y-=R.y;return R.r}function M(h,E){var p=0;if(h.hasChildren()){for(var v in h.children){var T=h.children[v];T.hasChildren()&&(T.r=M(T,E))}p=P(Object.values(h.children),E)}return p}function b(h,E){M(h,E);for(var p in h.children){var v=h.children[p];v.applyPositionToChildren()}}function _(h,E,p){if(!i(E))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");p=r(p,e);var v={},T={},R=E.nodes(),y=p.center,H=p.hierarchyAttributes,j=t.createShuffleInPlace(p.rng),A=p.scale,m=new n;E.forEachNode(function(I,se){var Q=se.size?se.size:1,Se=new n(I,null,null,Q),oe=m;H.forEach(function(ue){var ne=se[ue];oe=oe.getChild(ne)}),oe.addChild(I,Se)}),b(m,j),a(E,m,v);var U=R.length,$,Z,X;for(X=0;X<U;X++){var K=R[X];$=y+A*v[K].x,Z=y+A*v[K].y,T[K]={x:$,y:Z},h&&(E.setNodeAttribute(K,p.attributes.x,$),E.setNodeAttribute(K,p.attributes.y,Z))}return T}var D=_.bind(null,!1);return D.assign=_.bind(null,!0),Gt=D,Gt}var xt,Fi;function ps(){if(Fi)return xt;Fi=1;var r=gt(),i=Fe(),t={dimensions:["x","y"],center:.5,scale:1};function e(a,s,o){if(!i(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");o=r(o,t);var u=o.dimensions;if(!Array.isArray(u)||u.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var l=o.center,d=o.scale,c=Math.PI*2,f=(l-.5)*d,g=s.order,w=u[0],S=u[1];function L(M,b){return b[w]=d*Math.cos(M*c/g)+f,b[S]=d*Math.sin(M*c/g)+f,b}var G=0;if(!a){var P={};return s.forEachNode(function(M){P[M]=L(G++,{})}),P}s.updateEachNodeAttributes(function(M,b){return L(G++,b),b},{attributes:u})}var n=e.bind(null,!1);return n.assign=e.bind(null,!0),xt=n,xt}var Ft,Ii;function ms(){if(Ii)return Ft;Ii=1;var r=gt(),i=Fe(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function e(a,s,o){if(!i(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");o=r(o,t);var u=o.dimensions;if(!Array.isArray(u)||u.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var l=u.length,d=o.center,c=o.rng,f=o.scale,g=(d-.5)*f;function w(L){for(var G=0;G<l;G++)L[u[G]]=c()*f+g;return L}if(!a){var S={};return s.forEachNode(function(L){S[L]=w({})}),S}s.updateEachNodeAttributes(function(L,G){return w(G),G},{attributes:u})}var n=e.bind(null,!1);return n.assign=e.bind(null,!0),Ft=n,Ft}var It,Ni;function vs(){if(Ni)return It;Ni=1;var r=gt(),i=Fe(),t=Math.PI/180,e={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function n(s,o,u,l){if(!i(o))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");l=r(l,e),l.degrees&&(u*=t);var d=l.dimensions;if(!Array.isArray(d)||d.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(o.order===0)return s?void 0:{};var c=d[0],f=d[1],g=0,w=0;if(!l.centeredOnZero){var S=1/0,L=-1/0,G=1/0,P=-1/0;o.forEachNode(function(h,E){var p=E[c],v=E[f];p<S&&(S=p),p>L&&(L=p),v<G&&(G=v),v>P&&(P=v)}),g=(S+L)/2,w=(G+P)/2}var M=Math.cos(u),b=Math.sin(u);function _(h){var E=h[c],p=h[f];return h[c]=g+(E-g)*M-(p-w)*b,h[f]=w+(E-g)*b+(p-w)*M,h}if(!s){var D={};return o.forEachNode(function(h,E){var p={};p[c]=E[c],p[f]=E[f],D[h]=_(p)}),D}o.updateEachNodeAttributes(function(h,E){return _(E),E},{attributes:d})}var a=n.bind(null,!1);return a.assign=n.bind(null,!0),It=a,It}var Bi;function bs(){return Bi||(Bi=1,Ne.circlepack=gs(),Ne.circular=ps(),Ne.random=ms(),Ne.rotation=vs()),Ne}var Es=bs(),Nt,Oi;function ws(){if(Oi)return Nt;Oi=1;var r=0,i=1,t=2,e=3;function n(s,o){return s+"Â§"+o}function a(){return .01*(.5-Math.random())}return Nt=function(o,u){var l=o.margin,d=o.ratio,c=o.expansion,f=o.gridSize,g=o.speed,w,S,L,G,P,M,b=!0,_=u.length,D=_/e|0,h=new Float32Array(D),E=new Float32Array(D),p=1/0,v=1/0,T=-1/0,R=-1/0;for(w=0;w<_;w+=e)L=u[w+r],G=u[w+i],M=u[w+t]*d+l,p=Math.min(p,L-M),T=Math.max(T,L+M),v=Math.min(v,G-M),R=Math.max(R,G+M);var y=T-p,H=R-v,j=(p+T)/2,A=(v+R)/2;p=j-c*y/2,T=j+c*y/2,v=A-c*H/2,R=A+c*H/2;var m=new Array(f*f),U=m.length,$;for($=0;$<U;$++)m[$]=[];var Z,X,K,I,se,Q,Se,oe,ue,ne;for(w=0;w<_;w+=e)for(L=u[w+r],G=u[w+i],M=u[w+t]*d+l,Z=L-M,X=L+M,K=G-M,I=G+M,se=Math.floor(f*(Z-p)/(T-p)),Q=Math.floor(f*(X-p)/(T-p)),Se=Math.floor(f*(K-v)/(R-v)),oe=Math.floor(f*(I-v)/(R-v)),ue=se;ue<=Q;ue++)for(ne=Se;ne<=oe;ne++)m[ue*f+ne].push(w);var V,q=new Set,W,J,O,B,C,be,fe,Ee,we,te,ye,_e,Me;for($=0;$<U;$++)for(V=m[$],w=0,P=V.length;w<P;w++)for(W=V[w],O=u[W+r],C=u[W+i],fe=u[W+t],S=w+1;S<P;S++)J=V[S],we=n(W,J),!(U>1&&q.has(we))&&(U>1&&q.add(we),B=u[J+r],be=u[J+i],Ee=u[J+t],te=B-O,ye=be-C,_e=Math.sqrt(te*te+ye*ye),Me=_e<fe*d+l+(Ee*d+l),Me&&(b=!1,J=J/e|0,_e>0?(h[J]+=te/_e*(1+fe),E[J]+=ye/_e*(1+fe)):(h[J]+=y*a(),E[J]+=H*a())));for(w=0,S=0;w<_;w+=e,S++)u[w+r]+=h[S]*.1*g,u[w+i]+=E[S]*.1*g;return{converged:b}},Nt}var Ge={},Ui;function Ss(){if(Ui)return Ge;Ui=1;var r=3;return Ge.validateSettings=function(i){return"gridSize"in i&&typeof i.gridSize!="number"||i.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in i&&typeof i.margin!="number"||i.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in i&&typeof i.expansion!="number"||i.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in i&&typeof i.ratio!="number"||i.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in i&&typeof i.speed!="number"||i.speed<=0?{message:"the `speed` setting should be a positive number."}:null},Ge.graphToByteArray=function(i,t){var e=i.order,n=new Float32Array(e*r),a=0;return i.forEachNode(function(s,o){typeof t=="function"&&(o=t(s,o)),n[a]=o.x,n[a+1]=o.y,n[a+2]=o.size||1,a+=r}),n},Ge.assignLayoutChanges=function(i,t,e){var n=0;i.forEachNode(function(a){var s={x:t[n],y:t[n+1]};typeof e=="function"&&(s=e(a,s)),i.mergeNodeAttributes(a,s),n+=r})},Ge.collectLayoutChanges=function(i,t,e){var n={},a=0;return i.forEachNode(function(s){var o={x:t[a],y:t[a+1]};typeof e=="function"&&(o=e(s,o)),n[s]=o,a+=r}),n},Ge.createWorker=function(t){var e=window.URL||window.webkitURL,n=t.toString(),a=e.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),s=new Worker(a);return e.revokeObjectURL(a),s},Ge}var Bt,zi;function _s(){return zi||(zi=1,Bt={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),Bt}var Ot,$i;function Cs(){if($i)return Ot;$i=1;var r=Fe(),i=ws(),t=Ss(),e=_s(),n=500;function a(o,u,l){if(!r(u))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof l=="number"?l={maxIterations:l}:l=l||{};var d=l.maxIterations||n;if(typeof d!="number"||d<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var c=Object.assign({},e,l.settings),f=t.validateSettings(c);if(f)throw new Error("graphology-layout-noverlap: "+f.message);var g=t.graphToByteArray(u,l.inputReducer),w=!1,S;for(S=0;S<d&&!w;S++)w=i(c,g).converged;if(o){t.assignLayoutChanges(u,g,l.outputReducer);return}return t.collectLayoutChanges(u,g,l.outputReducer)}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),Ot=s,Ot}var As=Cs();const Ts=Vt(As),Ln=JSON.parse(`[{"study":"Accounting and Control","related studies":["Corporate Finance and Control","Economics, Behaviour and Policy","Financial Economics","International Economics & Development","International Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"48","study_type":"Master's specialisation"},{"study":"Adaptive Organisms","related studies":["Conservation and Restoration Ecology","Microbiology","Environment & Sustainability"],"faculty":["Faculty of Science"],"student_count":"39","study_type":"Master's specialisation"},{"study":"American Studies","related studies":["English Language and Culture","Arts and Culture Studies"],"faculty":["Faculty of Arts"],"student_count":"17","study_type":"Bachelor's"},{"study":"Ancient and Medieval Mediterranean Worlds","related studies":["Historical Studies","Roman Archeology","Politics and Parliament","Modern and Contemporary History"],"faculty":["Faculty of Arts"],"student_count":"20","study_type":"Master's specialisation"},{"study":"Anthropology and Development Studies","related studies":["Pre-Master's Anthropology and Development Studies","Social and Cultural Science: Comparative Research on Societies (research)","Intersectional Gender Studies","Sociology","International Economics & Development"],"faculty":["Faculty of Social Sciences"],"student_count":"28","study_type":"Master's | Joint programme optional"},{"study":"Art History","related studies":["Arts and Culture Studies","History","Philosophy"],"faculty":["Faculty of Arts"],"student_count":"26","study_type":"Bachelor's"},{"study":"Art History","related studies":["Creative Industries","Cultural Policy and the Business of Art","Tourism and Culture","Art and Visual Culture","Roman Archeology"],"faculty":["Faculty of Arts"],"student_count":"26","study_type":"Master's specialisation"},{"study":"Art and Visual Culture","related studies":["Literary Studies","Creative Industries","Cultural Policy and the Business of Art","Art History"],"faculty":["Faculty of Arts"],"student_count":"8","study_type":"Master's"},{"study":"Artificial Intelligence","related studies":["Computing Science","Biomedical Sciences","Human Neuroscience","Medicine","Molecular Life Sciences","Linguistics","Physics and Astronomy"],"faculty":["Faculty of Social Sciences"],"student_count":"152","study_type":"Bachelor's"},{"study":"Arts and Culture Studies","related studies":["Arts and Culture Studies","Art History","Cultural Anthropology and Development Sociology","American Studies","Philosophy"],"faculty":["Faculty of Arts"],"student_count":"26","study_type":"Bachelor's"},{"study":"Bedrijfskunde","related studies":["Economics and Business Economics","Economics and Business Economics","International Business Administration","Recht en Management","Public Administration","International Business Communication"],"faculty":["Nijmegen School of Management"],"student_count":"289","study_type":"Bachelor's"},{"study":"Behaviour Change","related studies":["Work, Organisation and Health","Cognitive Neuroscience (research)","Social and Cultural Science: Comparative Research on Societies (research)","Behavioural Science (research)","Healthcare Psychology"],"faculty":["Faculty of Social Sciences"],"student_count":"40","study_type":"Master's specialisation"},{"study":"Behavioural Science (research)","related studies":["Cognitive Neuroscience (research)","Social and Cultural Science: Comparative Research on Societies (research)","Communication Science","Behaviour Change","Educational Sciences","Pedagogical Sciences"],"faculty":["Faculty of Social Sciences"],"student_count":"42","study_type":"Research Master's"},{"study":"Biblical Exegesis","related studies":["Theology 1 yr","Philosophy of Religion","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Biology","related studies":["Biomedical Sciences","Medicine","Molecular Life Sciences","Physics and Astronomy","Chemistry","Human Neuroscience"],"faculty":["Faculty of Science"],"student_count":"141","study_type":"Bachelor's"},{"study":"Biomedical Sciences","related studies":["Medicine","Biology","Mathematics"],"faculty":["Faculty of Medical Sciences"],"study_type":"Bachelor's"},{"study":"Biomedical Sciences","related studies":["Molecular Mechanisms of Disease (research)","Human Biology","Microbiology"],"faculty":["Faculty of Medical Sciences"],"study_type":"Master's"},{"study":"Borders, Migration and Justice","related studies":["Conflict, Territories and Identities","Capital, Labour and Extraction","Cities, Culture and Inequality","Two-year Educational Master's Geography"],"faculty":["Nijmegen School of Management"],"study_type":"Master's specialisation | Joint programme optional"},{"study":"Business Analysis and Modelling","related studies":["European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Marketing","Organisational Design & Development","Strategic Human Resources Leadership","Strategic Management","Responsible Digitalisation","Science for Sustainability"],"faculty":["Nijmegen School of Management"],"student_count":"14","study_type":"Master's specialisation"},{"study":"Business Law","related studies":["International and European Law Advanced","European Law and Global Affairs","Human Rights and Migration"],"faculty":["Faculty of Law"],"student_count":"29","study_type":"Master's specialisation"},{"study":"Business and Law (research)","related studies":["Business and Law - dual master","Company Law","Business Law"],"faculty":["Faculty of Law"],"student_count":"12","study_type":"Onderzoeksmaster"},{"study":"Business and Law - dual master","related studies":["Business and Law (research)","Company Law","Business Law"],"faculty":["Faculty of Law"],"student_count":"20","study_type":"Master's"},{"study":"Capital, Labour and Extraction","related studies":["Conflict, Territories and Identities","Borders, Migration and Justice","Cities, Culture and Inequality","Two-year Educational Master's Geography"],"faculty":["Nijmegen School of Management"],"study_type":"Master's specialisation | Joint programme optional"},{"study":"Chemistry","related studies":["Molecular Life Sciences","Biomedical Sciences","Physics and Astronomy","Science","Biology"],"faculty":["Faculty of Science"],"student_count":"39","study_type":"Bachelor's"},{"study":"Chemistry of Life","related studies":["Molecular Chemistry","Medicinal Chemistry","Physical Chemistry"],"faculty":["Faculty of Science"],"student_count":"23","study_type":"Master's specialisation"},{"study":"Cities, Culture and Inequality","related studies":["Conflict, Territories and Identities","Capital, Labour and Extraction","Borders, Migration and Justice","Two-year Educational Master's Geography"],"faculty":["Nijmegen School of Management"],"study_type":"Master's specialisation | Joint programme optional"},{"study":"Cities, Water and Climate Change","related studies":["Planning, Land and Real Estate Development","Urban and Regional Mobility"],"faculty":["Nijmegen School of Management"],"student_count":"56","study_type":"Master's specialisation"},{"study":"Civil Law","related studies":["Financial Law","Company Law","Constitutional and Administrative Law","Criminal Law","Tax Law","Notarial Law"],"faculty":["Faculty of Law"],"student_count":"376","study_type":"Master's specialisation"},{"study":"Classics","related studies":["History","Art History","Arts and Culture Studies"],"faculty":["Faculty of Arts"],"student_count":"19","study_type":"Bachelor's"},{"study":"Cognitive Computing","related studies":["Intelligent Technology","Cognitive Neuroscience (research)","Data Science"],"faculty":["Faculty of Social Sciences"],"student_count":"21","study_type":"Master's specialisation"},{"study":"Cognitive Neuroscience (research)","related studies":["Cognitive Computing","Intelligent Technology","Behavioural Science (research)","Behaviour Change","Linguistics and Communication Sciences (research)","Neurobiology"],"faculty":["Faculty of Social Sciences"],"student_count":"92","study_type":"Research Master's"},{"study":"Communication Science","related studies":["Sociology","Psychology","Bedrijfskunde","Pedagogical Sciences","Bedrijfskunde","Communication and Information Studies"],"faculty":["Faculty of Social Sciences"],"student_count":"62","study_type":"Bachelor's"},{"study":"Communication Science","related studies":["Pre-Master's Communication Science","Communication and Persuasion","Sociology","Behavioural Science (research)","Social and Cultural Science: Comparative Research on Societies (research)","Global Communication and Diversity"],"faculty":["Faculty of Social Sciences"],"student_count":"67","study_type":"Master's"},{"study":"Communication and Information Studies","related studies":["Dutch Language and Culture","Linguistics","Communication Science","International Business Communication"],"faculty":["Faculty of Arts"],"student_count":"16","study_type":"Bachelor's"},{"study":"Communication and Persuasion","related studies":["Global Communication and Diversity","Communication Science","Linguistics and Communication Sciences (research)"],"faculty":["Faculty of Arts"],"student_count":"95","study_type":"Master's specialisation"},{"study":"Company Law","related studies":["Civil Law","Financial Law","Constitutional and Administrative Law","Criminal Law","Business and Law (research)","Business and Law - dual master"],"faculty":["Faculty of Law"],"student_count":"157","study_type":"Master's specialisation"},{"study":"Comparative Politics: Democracies and Autocracies","related studies":["Conflict, Power and Politics","European Union Politics and Governance","Gender Equality, Diversity and Inclusion in Politics","Global Political Economy","International Relations","Political Theory","Social and Cultural Science: Comparative Research on Societies (research)"],"faculty":["Nijmegen School of Management"],"student_count":"25","study_type":"Master's specialisation | Joint programme optional"},{"study":"Computing Science","related studies":["Artificial Intelligence","Physics and Astronomy","Chemistry","Mathematics","Biomedical Sciences"],"faculty":["Faculty of Science"],"student_count":"135","study_type":"Bachelor's"},{"study":"Conflict, Power and Politics","related studies":["Comparative Politics: Democracies and Autocracies","European Union Politics and Governance","Gender Equality, Diversity and Inclusion in Politics","Global Political Economy","International Relations","Political Theory"],"faculty":["Nijmegen School of Management"],"student_count":"43","study_type":"Master's specialisation | Joint programme optional"},{"study":"Conflict, Territories and Identities","related studies":["Capital, Labour and Extraction","Borders, Migration and Justice","Cities, Culture and Inequality","Two-year Educational Master's Geography"],"faculty":["Nijmegen School of Management"],"student_count":"81","study_type":"Master's specialisation | Joint programme optional"},{"study":"Conservation and Restoration Ecology","related studies":["Microbiology","Adaptive Organisms","Environment & Sustainability"],"faculty":["Faculty of Science"],"student_count":"75","study_type":"Master's specialisation"},{"study":"Constitutional and Administrative Law","related studies":["Civil Law","Financial Law","Company Law","Criminal Law","Publiekrecht","Business and Law (research)"],"faculty":["Faculty of Law"],"student_count":"112","study_type":"Master's specialisation"},{"study":"Continental Philosophy: Phenomenology, Hermeneutics and Psychoanalysis","related studies":["Practical Philosophy: Critique of Modernity","Theology 1 yr"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Corporate Finance and Control","related studies":["Accounting and Control","Economics, Behaviour and Policy","Financial Economics","International Economics & Development","International Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"32","study_type":"Master's specialisation"},{"study":"Creative Industries","related studies":["Tourism and Culture","Art and Visual Culture","Cultural Policy and the Business of Art","Art History"],"faculty":["Faculty of Arts"],"student_count":"25","study_type":"Master's specialisation"},{"study":"Criminal Law","related studies":["Civil Law","Financial Law","Company Law","Constitutional and Administrative Law","Publiekrecht","Business and Law - dual master"],"faculty":["Faculty of Law"],"student_count":"189","study_type":"Master's specialisation"},{"study":"Cultural Anthropology and Development Sociology","related studies":["Sociology","Geography, Spatial Planning and Environment","Communication Science","Psychology","Philosophy, Politics and Society","Arts and Culture Studies"],"faculty":["Faculty of Social Sciences"],"student_count":"61","study_type":"Bachelor's"},{"study":"Cultural Policy and the Business of Art","related studies":["Creative Industries","Art History","Art and Visual Culture","The Book Industry"],"faculty":["Faculty of Arts"],"student_count":"19","study_type":"Master's specialisation"},{"study":"Curriculum Development for Primary Education","related studies":["Pedagogical Sciences","Educational Sciences","Pre-master Curriculumontwikkeling voor Primair Onderwijs"],"faculty":["Faculty of Social Sciences"],"student_count":"8","study_type":"Master's"},{"study":"Cyber Security","related studies":["Data Science","Information Sciences","Software Science"],"faculty":["Faculty of Science"],"student_count":"109","study_type":"Master's specialisation"},{"study":"Cyber Security and AI","related studies":["Cyber Security","Cognitive Computing","Intelligent Technology"],"faculty":["Faculty of Science"],"student_count":"20","study_type":"Master's specialisation | Joint programme optional"},{"study":"Cyber Security and AI","related studies":["Cyber Security","Cognitive Computing","Intelligent Technology"],"faculty":["Faculty of Science"],"student_count":"20","study_type":"Masterspecialisatie | Joint programme optioneel"},{"study":"Data Science","related studies":["Software Science","Cyber Security","Mathematical Foundations of Computer Science"],"faculty":["Faculty of Science"],"student_count":"129","study_type":"Master's specialisation"},{"study":"Dentistry","related studies":["Medicine","Biomedical Sciences","Biology"],"faculty":["Faculty of Medical Sciences"],"study_type":"Bachelor's"},{"study":"Dentistry","related studies":["Medicine","Biomedical Sciences","Molecular Mechanisms of Disease (research)"],"faculty":["Faculty of Medical Sciences"],"study_type":"Master's"},{"study":"Dutch Language and Culture","related studies":["Linguistics","Communication and Information Studies","Arts and Culture Studies","Communication Science"],"faculty":["Faculty of Arts"],"student_count":"27","study_type":"Bachelor's"},{"study":"Dutch as a Second Language: Teacher and Expert","related studies":["Language Variation and Multilingualism","Educational Sciences","Communication and Persuasion","Two-year Educational Master's Dutch"],"faculty":["Faculty of Arts"],"student_count":"28","study_type":"Master's specialisation"},{"study":"Dutch-German-Studies (joint degree)","related studies":["Global Communication and Diversity","Linguistics and Communication Sciences (research)","Political Theory","Two-year Educational Master's German"],"faculty":["Faculty of Arts"],"student_count":"11","study_type":"Master | Joint programme"},{"study":"Economics and Business Economics","related studies":["Bedrijfskunde","Economics and Business Economics","Law and Economics","Public Administration","International Business Administration","Political Science"],"faculty":["Nijmegen School of Management"],"student_count":"106","study_type":"Bachelor's"},{"study":"Economics, Behaviour and Policy","related studies":["Accounting and Control","Corporate Finance and Control","Financial Economics","International Economics & Development","International Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"33","study_type":"Master's specialisation"},{"study":"Education in Museums and Heritage (double degree programme)","related studies":["Art History","Cultural Policy and the Business of Art","Creative Industries","Tourism and Culture"],"faculty":["Faculty of Arts"],"study_type":"Master's | Joint programme"},{"study":"Educational Sciences","related studies":["Behavioural Science (research)","Curriculum Development for Primary Education","Sociology","Pedagogical Sciences","Dutch as a Second Language: Teacher and Expert"],"faculty":["Faculty of Social Sciences"],"student_count":"45","study_type":"Master's"},{"study":"English Language and Culture","related studies":["American Studies","Arts and Culture Studies"],"faculty":["Faculty of Arts"],"student_count":"69","study_type":"Bachelor's"},{"study":"Environment & Sustainability","related studies":["Adaptive Organisms","Conservation and Restoration Ecology","Science, Management and Innovation"],"faculty":["Faculty of Science"],"student_count":"7","study_type":"Master's specialisation"},{"study":"Environmental Justice and Governance","related studies":["Global Environment and Sustainability","Local Environmental Change and Sustainable Cities","Sustainable Economies and Corporations"],"faculty":["Nijmegen School of Management"],"student_count":"5","study_type":"Master's specialisation"},{"study":"European Law School","related studies":["Law","Notarial Law","Recht en Management","Law and Economics"],"faculty":["Faculty of Law"],"student_count":"74","study_type":"Bachelor's"},{"study":"European Law and Global Affairs","related studies":["International and European Law Advanced","Human Rights and Migration","Business Law"],"faculty":["Faculty of Law"],"student_count":"16","study_type":"Master's specialisation"},{"study":"European Master in System Dynamics","related studies":["Business Analysis and Modelling","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Marketing","Organisational Design & Development","Strategic Human Resources Leadership","Strategic Management","Science for Sustainability","Responsible Digitalisation"],"faculty":["Nijmegen School of Management"],"student_count":"4","study_type":"Master's specialisation | Joint programme"},{"study":"European Union Governance and Politics","related studies":["Policy, Knowledge and Conflict","Governance of Safety and Security","Management of Civil Challenges"],"faculty":["Nijmegen School of Management"],"student_count":"20","study_type":"Master's specialisation"},{"study":"European Union Politics and Governance","related studies":["Comparative Politics: Democracies and Autocracies","Conflict, Power and Politics","Gender Equality, Diversity and Inclusion in Politics","Global Political Economy","International Relations","Political Theory"],"faculty":["Nijmegen School of Management"],"student_count":"12","study_type":"Master's specialisation | Joint programme optional"},{"study":"Filosofie van de Geesteswetenschappen","related studies":["Creative Industries","Art and Visual Culture","Practical Philosophy: Critique of Modernity"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Financial Economics","related studies":["Accounting and Control","Corporate Finance and Control","Financial Economics","International Economics & Development","International Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"47","study_type":"Master's specialisation"},{"study":"Financial Law","related studies":["Civil Law","Company Law","Constitutional and Administrative Law","Criminal Law","Tax Law","Notarial Law"],"faculty":["Faculty of Law"],"student_count":"29","study_type":"Master's specialisation"},{"study":"French Language and Culture","related studies":["Communication and Information Studies","Spanish Language and Culture","German Language and Culture","Linguistics"],"faculty":["Faculty of Arts"],"student_count":"9","study_type":"Bachelor's"},{"study":"Gender Equality, Diversity and Inclusion in Management","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Innovation and Entrepreneurship","International Business","Marketing","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"5","study_type":"Master's specialisation"},{"study":"Gender Equality, Diversity and Inclusion in Politics","related studies":["Comparative Politics: Democracies and Autocracies","Conflict, Power and Politics","European Union Politics and Governance","Global Political Economy","International Relations","Political Theory"],"faculty":["Nijmegen School of Management"],"student_count":"10","study_type":"Master's specialisation | Joint programme optional"},{"study":"Geography, Spatial Planning and Environment","related studies":["Sociology","Political Science","Public Administration","Cultural Anthropology and Development Sociology","Physics and Astronomy","Biology"],"faculty":["Nijmegen School of Management"],"student_count":"131","study_type":"Bachelor's"},{"study":"German Language and Culture","related studies":["International Business Communication","History","Linguistics"],"faculty":["Faculty of Arts"],"student_count":"7","study_type":"Bachelor's"},{"study":"Global Communication and Diversity","related studies":["Linguistics and Communication Sciences (research)","Communication and Persuasion"],"faculty":["Faculty of Arts"],"student_count":"32","study_type":"Master's specialisation"},{"study":"Global Environment and Sustainability","related studies":["Sustainable Economies and Corporations","Local Environmental Change and Sustainable Cities","Environmental Justice and Governance","Science for Sustainability"],"faculty":["Nijmegen School of Management"],"student_count":"19","study_type":"Master's specialisation"},{"study":"Global Political Economy","related studies":["Comparative Politics: Democracies and Autocracies","Conflict, Power and Politics","European Union Politics and Governance","Gender Equality, Diversity and Inclusion in Politics","International Relations","Political Theory"],"faculty":["Nijmegen School of Management"],"student_count":"8","study_type":"Master's specialisation | Joint programme optional"},{"study":"Governance of Safety and Security","related studies":["Management of Civil Challenges","Policy, Knowledge and Conflict","European Union Governance and Politics"],"faculty":["Nijmegen School of Management"],"student_count":"38","study_type":"Master's specialisation"},{"study":"Great ideas and their history","related studies":["Continental Philosophy: Phenomenology, Hermeneutics and Psychoanalysis"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Greek and Latin Language and Literature","related studies":["Roman Archeology","The Book Industry","Literature and Society","Literary Studies","Two-year Educational Master's Classics"],"faculty":["Faculty of Arts"],"student_count":"7","study_type":"Master's specialisation"},{"study":"Healthcare Psychology","related studies":["Behaviour Change","Work, Organisation and Health","Behavioural Science (research)","Cognitive Neuroscience (research)","Intersectional Gender Studies","Pedagogical Sciences"],"faculty":["Faculty of Social Sciences"],"study_type":"Master's specialisation"},{"study":"Historical Studies","related studies":["Ancient and Medieval Mediterranean Worlds","History of Church and Theology","Philosophy of History","Modern and Contemporary History"],"faculty":["Faculty of Arts"],"student_count":"17","study_type":"Master's"},{"study":"History","related studies":["Classics","Art History","Political Science"],"faculty":["Faculty of Arts"],"student_count":"127","study_type":"Bachelor's"},{"study":"History of Church and Theology","related studies":["Theology 1 yr","Philosophy of Religion","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"History of Philosophy and Science","related studies":["Philosophy of History","Great ideas and their history"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's"},{"study":"Human Biology","related studies":["Medical Epigenomics","Neurobiology","Medicinal Chemistry"],"faculty":["Faculty of Science"],"student_count":"182","study_type":"Master's specialisation"},{"study":"Human Neuroscience","related studies":["Biology","Psychology","Artificial Intelligence","Biomedical Sciences"],"faculty":["Faculty of Social Sciences"],"study_type":"Bachelor's"},{"study":"Human Rights and Migration","related studies":["International and European Law Advanced","European Law and Global Affairs","Business Law"],"faculty":["Faculty of Law"],"student_count":"20","study_type":"Master's specialisation"},{"study":"Information Sciences","related studies":["Cyber Security","Intelligent Technology","Data Science"],"faculty":["Faculty of Science"],"student_count":"38","study_type":"Master's"},{"study":"Innovation and Entrepreneurship","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","International Business","Marketing","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"55","study_type":"Master's specialisation"},{"study":"Intelligent Technology","related studies":["Cognitive Computing","Cognitive Neuroscience (research)","Data Science"],"faculty":["Faculty of Social Sciences"],"student_count":"56","study_type":"Master's specialisation | Joint programme optional"},{"study":"International Business","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","Marketing","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"70","study_type":"Master's specialisation | Joint programme optional"},{"study":"International Business Administration","related studies":["Business Administration","Economics and Business Economics","Economics and Business Economics","International Business Communication","Law and Management","Law and Economics"],"faculty":["Nijmegen School of Management"],"student_count":"110","study_type":"Bachelor's"},{"study":"International Business Communication","related studies":["Communication and Information Studies","International Business Administration","English Language and Culture"],"faculty":["Faculty of Arts"],"student_count":"55","study_type":"Bachelor's"},{"study":"International Economics & Development","related studies":["Accounting and Control","Corporate Finance and Control","Economics, Behaviour and Policy","Financial Economics","International Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"10","study_type":"Master's specialisation"},{"study":"International Political Economy","related studies":["Accounting and Control","Corporate Finance and Control","Economics, Behaviour and Policy","Financial Economics","International Economics & Development","Global Political Economy"],"faculty":["Nijmegen School of Management"],"student_count":"16","study_type":"Master's specialisation | Joint programme optional"},{"study":"International Relations","related studies":["Comparative Politics: Democracies and Autocracies","Conflict, Power and Politics","European Union Politics and Governance","Gender Equality, Diversity and Inclusion in Politics","Global Political Economy","Political Theory"],"faculty":["Nijmegen School of Management"],"student_count":"38","study_type":"Master's specialisation | Joint programme optional"},{"study":"International and European Law Advanced","related studies":["Business Law","Human Rights and Migration","European Law and Global Affairs"],"faculty":["Faculty of Law"],"student_count":"28","study_type":"Master's specialisation"},{"study":"Intersectional Gender Studies","related studies":["Social and Cultural Science: Comparative Research on Societies (research)","Anthropology and Development Studies","Sociology","Gender Equality, Diversity and Inclusion in Politics","Gender Equality, Diversity and Inclusion in Management"],"faculty":["Faculty of Social Sciences"],"study_type":"Master's"},{"study":"Islam, Politics and Society","related studies":["Pre-Master's Theology & Religious Studies: Islam, Politics and Society","Religion, Politics and Society","Philosophy, Politics and Society"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Bachelor's"},{"study":"Islam, Politics and Society","related studies":["Religion and Policy","Religious Studies","Philosophy of Religious Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Language Variation and Multilingualism","related studies":["Language and Speech Pathology","Linguistics and Communication Sciences (research)","Dutch as a Second Language: Teacher and Expert"],"faculty":["Faculty of Arts"],"student_count":"48","study_type":"Master's specialisation"},{"study":"Language and Communication Technology","related studies":["Language and Speech Pathology","Intelligent Technology","Communication and Persuasion","Linguistics and Communication Sciences (research)"],"faculty":["Faculty of Arts"],"study_type":"Master's"},{"study":"Language and Speech Pathology","related studies":["Language Variation and Multilingualism","Dutch as a Second Language: Teacher and Expert","Two-year Educational Master's Dutch"],"faculty":["Faculty of Arts"],"student_count":"23","study_type":"Master's specialisation"},{"study":"Law","related studies":["Notarial Law","European Law School","Recht en Management","Law and Economics"],"faculty":["Faculty of Law"],"student_count":"370","study_type":"Bachelor's"},{"study":"Linguistics","related studies":["Dutch Language and Culture","Communication and Information Studies","Artificial Intelligence"],"faculty":["Faculty of Arts"],"student_count":"30","study_type":"Bachelor's"},{"study":"Linguistics and Communication Sciences (research)","related studies":["Language Variation and Multilingualism","Global Communication and Diversity","Cognitive Neuroscience (research)","Communication and Persuasion"],"faculty":["Faculty of Arts"],"student_count":"30","study_type":"Research Master's"},{"study":"Literary Studies","related studies":["Literature and Society","Cultural Policy and the Business of Art","Greek and Latin Language and Literature","Dutch-German-Studies (joint degree)"],"faculty":["Faculty of Arts"],"student_count":"16","study_type":"Master's"},{"study":"Literature and Society","related studies":["The Book Industry","Literary Studies","Dutch-German-Studies (joint degree)","Two-year Educational Master's Dutch"],"faculty":["Faculty of Arts"],"student_count":"26","study_type":"Master's specialisation"},{"study":"Local Environmental Change and Sustainable Cities","related studies":["Sustainable Economies and Corporations","Global Environment and Sustainability","Environmental Justice and Governance","Science for Sustainability"],"faculty":["Nijmegen School of Management"],"student_count":"27","study_type":"Master's specialisation"},{"study":"Management of Civil Challenges","related studies":["Policy, Knowledge and Conflict","Governance of Safety and Security","European Union Governance and Politics"],"faculty":["Nijmegen School of Management"],"student_count":"35","study_type":"Master's specialisation"},{"study":"Marketing","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"58","study_type":"Master's specialisation"},{"study":"Master in teaching Biology","related studies":["Educatieve Minor of Module Biologie"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Mathematical Foundations of Computer Science","related studies":["Mathematics","Data Science","Information Sciences"],"faculty":["Faculty of Science"],"student_count":"46","study_type":"Master's specialisation"},{"study":"Mathematics","related studies":["Physics and Astronomy","Computing Science","Artificial Intelligence","Medicine","Science"],"faculty":["Faculty of Science"],"student_count":"78","study_type":"Bachelor's"},{"study":"Mathematics","related studies":["Mathematical Foundations of Computer Science","Particle and Astrophysics","Quantum Matter"],"faculty":["Faculty of Science"],"student_count":"74","study_type":"Master's specialisation"},{"study":"Medical Epigenomics","related studies":["Neurobiology","Biomedical Sciences","Medicinal Chemistry"],"faculty":["Faculty of Science"],"student_count":"59","study_type":"Master's specialisation"},{"study":"Medicinal Chemistry","related studies":["Chemistry of Life","Medical Epigenomics","Molecular Chemistry"],"faculty":["Faculty of Science"],"student_count":"52","study_type":"Master's specialisation"},{"study":"Medicine","related studies":["Dentistry","Biomedical Sciences","Biology"],"faculty":["Faculty of Medical Sciences"],"study_type":"Bachelor's"},{"study":"Medicine","related studies":["Biomedical Sciences","Dentistry","Molecular Mechanisms of Disease (research)"],"faculty":["Faculty of Medical Sciences"],"study_type":"Master's"},{"study":"Metaphysics and Philosophical Anthropology","related studies":["Continental Philosophy: Phenomenology, Hermeneutics and Psychoanalysis","Philosophy of Religion"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Research Master's"},{"study":"Microbiology","related studies":["Adaptive Organisms","Conservation and Restoration Ecology","Environment & Sustainability"],"faculty":["Faculty of Science"],"student_count":"54","study_type":"Master's specialisation"},{"study":"Modern and Contemporary History","related studies":["Ancient and Medieval Mediterranean Worlds","Politics and Parliament","Historical Studies","History of Church and Theology","Two-year Educational Master's History"],"faculty":["Faculty of Arts"],"student_count":"39","study_type":"Master's specialisation"},{"study":"Molecular Chemistry","related studies":["Physical Chemistry","Chemistry of Life","Medicinal Chemistry"],"faculty":["Faculty of Science"],"student_count":"49","study_type":"Master's specialisation"},{"study":"Molecular Life Sciences","related studies":["Biomedical Sciences","Medicine","Biology","Chemistry","Science"],"faculty":["Faculty of Science"],"student_count":"76","study_type":"Bachelor's"},{"study":"Molecular Mechanisms of Disease (research)","related studies":["Biomedical Sciences"],"faculty":["Faculty of Medical Sciences"],"study_type":"Research Master's"},{"study":"Neurobiology","related studies":["Neurophysics","Human Biology","Cognitive Neuroscience (research)"],"faculty":["Faculty of Science"],"student_count":"95","study_type":"Master's specialisation"},{"study":"Neurophysics","related studies":["Neurobiology","Quantum Matter","Cognitive Neuroscience (research)"],"faculty":["Faculty of Science"],"student_count":"47","study_type":"Master's specialisation"},{"study":"Notarial Law","related studies":["Law","European Law School","Recht en Management","Law and Economics"],"faculty":["Faculty of Law"],"student_count":"92","study_type":"Bachelor's"},{"study":"Notarial Law","related studies":["Tax Law","Civil Law","Company Law"],"faculty":["Faculty of Law"],"student_count":"145","study_type":"Master's"},{"study":"One-year Educational Master's Art History and Cultural and Artistic Education","related studies":["Two-year Educational Master's Art History and Cultural and Artistic Education"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Business Economics","related studies":["Economics and Business Economics"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Chemistry","related studies":["Educatieve Minor of Module Scheikunde"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Dutch","related studies":["Two-year Educational Pre-Master's Dutch","Two-year Educational Master's Dutch","Dutch Language and Culture"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Economics","related studies":["Economics and Business Economics"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's English","related studies":["Two-year Educational Pre-Master's English","Two-year Educational Master's English","Educatieve Minor of Module Engels"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's French","related studies":["Two-year Educational Pre-Master's French","Two-year Educational Master's French","Educatieve Minor of Module Frans"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Geography","related studies":["Two-year Educational Master's Geography","Educatieve Minor of Module Aardrijkskunde"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's German","related studies":["Two-year Educational Pre-Master's German","Two-year Educational Master's German","Educatieve Minor of Module Duits"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Greek & Latin","related studies":["Two-year Educational Master's Classics","Greek and Latin Language and Literature","Educatieve Minor of Module Grieks en Latijn"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's History and Civics","related studies":["Two-year Educational Master's History","Educatieve Minor of Module Geschiedenis","Two-year Educational Pre-Master's History","Politics and Parliament","Modern and Contemporary History","Ancient and Medieval Mediterranean Worlds"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Mathematics","related studies":["Educatieve Minor of Module Wiskunde"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Philosophy","related studies":["Two-year Educational Master's Philosophy","Pre-Master's Philosophy"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Physics","related studies":["Educatieve Minor of Module Natuurkunde"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Religious Studies","related studies":["Two-year Educational Master's Religion","Philosophy of Religious Sciences","Pre-Master's Philosophy","Educatieve Minor of Module Godsdienst & levensbeschouwing"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"One-year Educational Master's Social Studies and Social Sciences","related studies":["Two-year Educational Pre-Master's Society Studies","Two-year Educational Master's Social Studies"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's"},{"study":"One-year Educational Master's Spanish","related studies":["Two-year Educational Pre-Master's Spanish","Educatieve Minor of Module Spaans","Two-year Educational Master's Spanish"],"faculty":["Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Organisational Design & Development","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Marketing","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"60","study_type":"Master's specialisation"},{"study":"Particle and Astrophysics","related studies":["Neurophysics","Quantum Matter","Mathematics"],"faculty":["Faculty of Science"],"student_count":"82","study_type":"Master's specialisation"},{"study":"Pedagogical Sciences","related studies":["Psychology","Sociology","Medicine","Communication Science","Pedagogical Sciences of Primary Education","Pedagogical Sciences (ALPO traject)"],"faculty":["Faculty of Social Sciences"],"student_count":"257","study_type":"Bachelor's"},{"study":"Pedagogical Sciences","related studies":["Educational Sciences","Curriculum Development for Primary Education","Behavioural Science (research)","Healthcare Psychology","Sociology","Intersectional Gender Studies"],"faculty":["Faculty of Social Sciences"],"student_count":"236","study_type":"Master's"},{"study":"Pedagogical Sciences (ALPO traject)","related studies":["Pedagogical Sciences of Primary Education","Pedagogical Sciences","Psychology","Medicine","Sociology","Communication Science"],"faculty":["Faculty of Social Sciences"],"study_type":"Bachelor's"},{"study":"Pedagogical Sciences of Primary Education","related studies":["Pedagogical Sciences (ALPO traject)","Pedagogical Sciences","Medicine","Psychology","Sociology","Psychology"],"faculty":["Faculty of Social Sciences"],"student_count":"59","study_type":"Bachelor's"},{"study":"Philosophy","related studies":["History","Sociology","Theology","Philosophy, Politics and Society"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Bachelor's"},{"study":"Philosophy of Behavioural Sciences","related studies":["Behavioural Science (research)","Pedagogical Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Cognitive Sciences","related studies":["Philosophy of Behavioural Sciences","Cognitive Neuroscience (research)"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Language and Cognition","related studies":["Philosophy of Cognitive Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Law","related studies":["Practical Philosophy: Critique of Modernity"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Mind and Language","related studies":["Philosophy of Language and Cognition"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Research Master's"},{"study":"Philosophy of Natural and Life Sciences","related studies":["Philosophy of Behavioural Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Political Sciences","related studies":["Philosophy of Behavioural Sciences","Practical Philosophy: Critique of Modernity","Political Theory"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Religion","related studies":["Theology 1 yr","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy of Religious Sciences","related studies":["Theology 1 yr","Religious Studies","Philosophy of Religion"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Philosophy, Politics and Society","related studies":["Political Science","Psychology","Psychology","Philosophy","Religion, Politics and Society"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Bachelor's"},{"study":"Philosophy, Politics and Society","related studies":["Practical Philosophy: Critique of Modernity"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Physical Chemistry","related studies":["Quantum Matter","Molecular Chemistry","Chemistry of Life"],"faculty":["Faculty of Science"],"student_count":"34","study_type":"Master's specialisation"},{"study":"Physics and Astronomy","related studies":["Medicine","Biomedical Sciences","Mathematics","Chemistry","Science"],"faculty":["Faculty of Science"],"student_count":"121","study_type":"Bachelor's"},{"study":"Planning, Land and Real Estate Development","related studies":["Cities, Water and Climate Change","Urban and Regional Mobility"],"faculty":["Nijmegen School of Management"],"student_count":"79","study_type":"Master's specialisation"},{"study":"Policy, Knowledge and Conflict","related studies":["Governance of Safety and Security","Management of Civil Challenges","European Union Governance and Politics"],"faculty":["Nijmegen School of Management"],"study_type":"Master's specialisation"},{"study":"Political Science","related studies":["Public Administration","Sociology","Geography, Spatial Planning and Environment","Philosophy, Politics and Society","History","European Law School"],"faculty":["Nijmegen School of Management"],"student_count":"114","study_type":"Bachelor's"},{"study":"Political Theory","related studies":["Comparative Politics: Democracies and Autocracies","Conflict, Power and Politics","European Union Politics and Governance","Gender Equality, Diversity and Inclusion in Politics","Global Political Economy","International Relations"],"faculty":["Nijmegen School of Management"],"student_count":"18","study_type":"Master's specialisation | Joint programme optional"},{"study":"Politics and Parliament","related studies":["Ancient and Medieval Mediterranean Worlds","Modern and Contemporary History","Historical Studies","Political Theory","Two-year Educational Master's History"],"faculty":["Faculty of Arts"],"student_count":"55","study_type":"Master's specialisation"},{"study":"Practical Philosophy: Critique of Modernity","related studies":["Philosophy of Political Sciences","Continental Philosophy: Phenomenology, Hermeneutics and Psychoanalysis"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Practical Theology","related studies":["Theology 1 yr","Philosophy of Religion","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Pre-Master's Anthropology and Development Studies","related studies":["Anthropology and Development Studies","Social and Cultural Science: Comparative Research on Societies (research)","Pre-Master's Sociology","Pre-Master's Human Geography","Pre-Master's Environment and Society Studies","Pre-Master's Political Science"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-Master's Artificial Intelligence: Cognitive Computing","related studies":["Pre-Master's Artificial Intelligence: Intelligent Technology","Intelligent Technology","Cognitive Computing"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-Master's"},{"study":"Pre-Master's Artificial Intelligence: Intelligent Technology","related studies":["Pre-Master's Artificial Intelligence: Cognitive Computing","Intelligent Technology","Cognitive Computing"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-Master's"},{"study":"Pre-Master's Communication Science","related studies":["Communication Science","Pre-Master's Sociology","Pre-Master's Communication and Persuasion","Pre-Master's Anthropology and Development Studies","Pre-Master's Educational Sciences"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-Master's Educational Sciences","related studies":["Educational Sciences","Pre-Master's Pedagogical Sciences","Pre-Master's Sociology","Pre-master Curriculumontwikkeling voor Primair Onderwijs"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-Master's Mathematics","related studies":["Mathematics","Mathematics"],"faculty":["Faculty of Science"],"study_type":"Pre-master's"},{"study":"Pre-Master's Orthodox Christianity","related studies":["Pre-Master's Theology","Pre-Master's Theology & Religious Studies: Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Pre-Master's"},{"study":"Pre-Master's Pedagogical Sciences","related studies":["Pedagogical Sciences","Pre-Master's Educational Sciences","Pre-master Curriculumontwikkeling voor Primair Onderwijs","Pre-Master's Sociology","Pre-Master's Communication Science"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-Master's Private Law","related studies":["Civil Law","Financial Law","Company Law","Business and Law - dual master","Business and Law (research)"],"faculty":["Faculty of Law"],"study_type":"Pre-master's"},{"study":"Pre-Master's Public Law","related studies":["Constitutional and Administrative Law","Criminal Law"],"faculty":["Faculty of Law"],"study_type":"Pre-master's"},{"study":"Pre-Master's Sociology","related studies":["Sociology","Pre-Master's Anthropology and Development Studies","Pre-Master's Communication Science","Pre-Master's Educational Sciences"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-Master's Tax Law","related studies":["Tax Law"],"faculty":["Faculty of Law"],"study_type":"Pre-master's"},{"study":"Pre-Master's Theology","related studies":["Pre-Master's Theology & Religious Studies: Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Pre-master's"},{"study":"Pre-Master's Theology & Religious Studies: Islam, Politics and Society","related studies":["Pre-Master's Theology & Religious Studies: Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Pre-master's"},{"study":"Pre-Master's Theology & Religious Studies: Religious Studies","related studies":["Pre-Master's Theology & Religious Studies: Islam, Politics and Society","Pre-Master's Theology"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Pre-master's"},{"study":"Pre-master Curriculumontwikkeling voor Primair Onderwijs","related studies":["Curriculum Development for Primary Education","Pre-Master's Pedagogical Sciences","Pre-Master's Educational Sciences","Two-year Educational Pre-Master's Dutch"],"faculty":["Faculty of Social Sciences"],"study_type":"Pre-master's"},{"study":"Pre-master Notarieel Recht","related studies":["Law","Notarial Law","European Law School"],"faculty":["Faculty of Law"],"study_type":"Pre-master's"},{"study":"Psychology","related studies":["Medicine","Pedagogical Sciences","Human Neuroscience","Sociology","Biomedical Sciences","Communication Science"],"faculty":["Faculty of Social Sciences"],"study_type":"Bachelor's"},{"study":"Public Administration","related studies":["Political Science","Sociology","Bedrijfskunde","Law","Economics and Business Economics","Recht en Management"],"faculty":["Nijmegen School of Management"],"student_count":"73","study_type":"Bachelor's"},{"study":"Quantum Matter","related studies":["Physical Chemistry","Neurophysics","Particle and Astrophysics"],"faculty":["Faculty of Science"],"student_count":"33","study_type":"Master's specialisation"},{"study":"Religion and Policy","related studies":["Religious Studies","Islam, Politics and Society","Spiritual Care"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Religion, Politics and Society","related studies":["Islam, Politics and Society","Cultural Anthropology and Development Sociology","Political Science","Sociology","Philosophy","Theology","Philosophy, Politics and Society"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Bachelor's"},{"study":"Religious Studies","related studies":["Religion and Policy","Spiritual Care","Islam, Politics and Society","Theology 1 yr","Philosophy of Religious Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Responsible Digitalisation","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","International Business","Marketing","Organisational Design & Development","Science for Sustainability","Strategic Human Resources Leadership","Strategic Management"],"faculty":["Nijmegen School of Management"],"study_type":"Master's specialisation"},{"study":"Roman Archeology","related studies":["Art History","Greek and Latin Language and Literature","Ancient and Medieval Mediterranean Worlds","Historical Studies","Two-year Educational Master's Classics"],"faculty":["Faculty of Arts"],"student_count":"7","study_type":"Master's specialisation"},{"study":"Science","related studies":["Physics and Astronomy","Chemistry","Biomedical Sciences","Molecular Life Sciences","Biology"],"faculty":["Faculty of Science"],"student_count":"40","study_type":"Bachelor's"},{"study":"Science for Sustainability","related studies":["Environment & Sustainability","Cities, Water and Climate Change","Conservation and Restoration Ecology"],"faculty":["Faculty of Science"],"study_type":"Master's"},{"study":"Social and Cultural Science: Comparative Research on Societies (research)","related studies":["Sociology","Anthropology and Development Studies","Intersectional Gender Studies","Comparative Politics: Democracies and Autocracies","Behavioural Science (research)","Communication Science"],"faculty":["Faculty of Social Sciences"],"student_count":"11","study_type":"Research Master's"},{"study":"Society, Language and Culture","related studies":["Cultural Anthropology and Development Sociology","German Language and Culture","French Language and Culture","Geography, Spatial Planning and Environment","Spanish Language and Culture","Sociology"],"faculty":["Faculty of Arts"],"study_type":"Bachelor's"},{"study":"Sociology","related studies":["Psychology","Pedagogical Sciences","Political Science","Communication Science","Cultural Anthropology and Development Sociology","Public Administration"],"faculty":["Faculty of Social Sciences"],"student_count":"59","study_type":"Bachelor's"},{"study":"Sociology","related studies":["Pre-Master's Sociology","Intersectional Gender Studies","Social and Cultural Science: Comparative Research on Societies (research)","Anthropology and Development Studies","One-year Educational Master's Social Studies and Social Sciences","Communication Science"],"faculty":["Faculty of Social Sciences"],"student_count":"24","study_type":"Master's"},{"study":"Software Science","related studies":["Cyber Security","Data Science","Mathematical Foundations of Computer Science"],"faculty":["Faculty of Science"],"student_count":"57","study_type":"Master's specialisation"},{"study":"Spanish Language and Culture","related studies":["Communication and Information Studies","French Language and Culture","Linguistics","German Language and Culture","Cultural Anthropology and Development Sociology"],"faculty":["Faculty of Arts"],"student_count":"9","study_type":"Bachelor's"},{"study":"Spiritual Care","related studies":["Theology 1 yr","Religious Studies","Practical Theology"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Strategic Human Resources Leadership","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Marketing","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Management"],"faculty":["Nijmegen School of Management"],"student_count":"55","study_type":"Master's specialisation | Joint programme optional"},{"study":"Strategic Management","related studies":["Business Analysis and Modelling","European Master in System Dynamics","Gender Equality, Diversity and Inclusion in Management","Innovation and Entrepreneurship","International Business","Marketing","Organisational Design & Development","Responsible Digitalisation","Science for Sustainability","Strategic Human Resources Leadership"],"faculty":["Nijmegen School of Management"],"student_count":"153","study_type":"Master's specialisation"},{"study":"Sustainable Economies and Corporations","related studies":["Global Environment and Sustainability","Local Environmental Change and Sustainable Cities","Environmental Justice and Governance","Science for Sustainability"],"faculty":["Nijmegen School of Management"],"student_count":"20","study_type":"Master's specialisation"},{"study":"Systematic Theology","related studies":["Theology 1 yr","Philosophy of Religion","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Tax Law","related studies":["Financial Law","Company Law","Notarial Law"],"faculty":["Faculty of Law"],"student_count":"87","study_type":"Master's"},{"study":"The Book Industry","related studies":["Literature and Society","Literary Studies","Cultural Policy and the Business of Art","Two-year Educational Master's Dutch"],"faculty":["Faculty of Arts"],"student_count":"28","study_type":"Master's specialisation"},{"study":"Theology","related studies":["Philosophy","Philosophy, Politics and Society","Religion, Politics and Society"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Bachelor's"},{"study":"Theology 1 yr","related studies":["Biblical Exegesis","History of Church and Theology","Practical Theology","Systematic Theology","Religious Studies"],"faculty":["Faculty of Philosophy, Theology and Religious Studies"],"study_type":"Master's specialisation"},{"study":"Tourism and Culture","related studies":["Creative Industries","Ancient and Medieval Mediterranean Worlds","Cultural Policy and the Business of Art","Art and Visual Culture"],"faculty":["Faculty of Arts"],"student_count":"28","study_type":"Master's specialisation"},{"study":"Transatlantic Studies: History, Culture and Politics","related studies":["Comparative Politics: Democracies and Autocracies","International Relations","Politics and Parliament","Two-year Educational Master's English"],"faculty":["Faculty of Arts"],"student_count":"23","study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Art History and Cultural and Artistic Education","related studies":["One-year Educational Master's Art History and Cultural and Artistic Education","Art History","Cultural Policy and the Business of Art","Creative Industries"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Classics","related studies":["One-year Educational Master's Greek & Latin","Greek and Latin Language and Literature","Roman Archeology"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Dutch","related studies":["One-year Educational Master's Dutch","Dutch as a Second Language: Teacher and Expert","The Book Industry","Literature and Society"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's English","related studies":["One-year Educational Master's English","Language Variation and Multilingualism","The Book Industry","Literature and Society"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's French","related studies":["One-year Educational Master's French","Language Variation and Multilingualism","The Book Industry","Literature and Society"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Geography","related studies":["Cities, Water and Climate Change","Planning, Land and Real Estate Development","Urban and Regional Mobility","Conflict, Territories and Identities","Capital, Labour and Extraction","Borders, Migration and Justice","Cities, Culture and Inequality","Sustainable Economies and Corporations","Global Environment and Sustainability","Local Environmental Change and Sustainable Cities"],"faculty":["Nijmegen School of Management","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's German","related studies":["One-year Educational Master's German","Dutch-German-Studies (joint degree)","The Book Industry","Literature and Society"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's History","related studies":["One-year Educational Master's History and Civics","Modern and Contemporary History","Politics and Parliament","Ancient and Medieval Mediterranean Worlds"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Philosophy","related studies":["One-year Educational Master's Philosophy","Two-year Educational Master's Religion","Practical Philosophy: Critique of Modernity","One-year Educational Master's Social Studies and Social Sciences"],"faculty":["Faculty of Philosophy, Theology and Religious Studies","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Religion","related studies":["One-year Educational Master's Religious Studies","Educatieve Minor of Module Godsdienst & levensbeschouwing"],"faculty":["Faculty of Philosophy, Theology and Religious Studies","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Two-year Educational Master's Social Studies","related studies":["Two-year Educational Master's Geography","Two-year Educational Master's Philosophy","Two-year Educational Master's History","Two-year Educational Master's Religion","Two-year Educational Master's Art History and Cultural and Artistic Education"],"faculty":["Nijmegen School of Management","Radboud Teachers Academy"],"study_type":"Master's"},{"study":"Two-year Educational Master's Spanish","related studies":["One-year Educational Master's Spanish","Language Variation and Multilingualism","The Book Industry","Literature and Society"],"faculty":["Faculty of Arts","Radboud Teachers Academy"],"study_type":"Master's specialisation"},{"study":"Urban and Regional Mobility","related studies":["Cities, Water and Climate Change","Planning, Land and Real Estate Development"],"faculty":["Nijmegen School of Management"],"student_count":"41","study_type":"Master's specialisation"},{"study":"Work, Organisation and Health","related studies":["Behaviour Change","Healthcare Psychology","Behavioural Science (research)","Intersectional Gender Studies","Social and Cultural Science: Comparative Research on Societies (research)","Cognitive Neuroscience (research)"],"faculty":["Faculty of Social Sciences"],"student_count":"51","study_type":"Master's specialisation"}]`),Hi=r=>r.split("").reduce((t,e)=>t=e.charCodeAt(0)+(t<<6)+(t<<16)-t,0),ji=["#191970","#006400","#ff0000","#ffd700","#00ff00","#00ffff","#ff00ff","#ffb6c1"],Ut=new Map;let Ls=0;function Rs(r){return Ut.has(r)||Ut.set(r,ji[Ls++%ji.length]),Ut.get(r)}function Ps(r){const i=Number(r);return isFinite(i)&&i>0?Math.max(8,Math.sqrt(i)*1.2):8}const ve=new Y({multi:!1,type:"undirected"}),Wi=new Set;Ln.forEach(r=>{const i=r.study,t=r.faculty??[],e=Ps(r.student_count?r.student_count/1.5:1),n=Rs(t[0]);ve.hasNode(i)||ve.addNode(i,{label:i,size:e,color:n})});Ln.forEach(r=>{(r["related studies"]??[]).forEach(i=>{ve.hasNode(i)||ve.addNode(i,{label:i,size:8,color:"#bbbbbb"});const t=Hi(r.study)+Hi(i)+"";console.log(t),Wi.has(t)||(ve.addEdge(r.study,i),Wi.add(t))})});Es.random.assign(ve,{scale:1});hs.assign(ve,{iterations:500,settings:{barnesHutOptimize:!0,outboundAttractionDistribution:!0}});Ts.assign(ve);let xe=null,ei=new Set;const ze=new ea(ve,document.getElementById("container"),{labelRenderedSizeThreshold:14,defaultEdgeType:"line",zIndex:"canvas"});ze.setSetting("nodeReducer",(r,i)=>!xe||r===xe||ei.has(r)?i:{...i,color:i.color,label:"",hidden:!1,zIndex:0,size:i.size*.5,color:"#cccccc"});ze.setSetting("edgeReducer",(r,i)=>{if(!xe)return i;const{source:t,target:e}=ve.extremities(r);return t===xe||e===xe?i:{...i,hidden:!1,color:"#E0E0E0"}});ze.on("enterNode",({node:r})=>{xe=r,ei=new Set(ve.neighbors(r)),ze.refresh()});ze.on("leaveNode",()=>{xe=null,ei.clear(),ze.refresh()});
